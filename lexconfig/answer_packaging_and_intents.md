# Як “упаковувати” відповіді (шаблон для юристів) + розширення intent-моделі (суди/процес/позиції ВС)

## 1) Принципи відповіді (що юрист очікує отримати)

- **Відповідь має бути придатна до використання в документі** (позов/відзив/скарга): теза → підстава → підтвердження.
- **Обовʼязково показувати джерела**: реквізити рішення/акта та коротка цитата.
- **Розмежовувати**:
  - що є **нормою**;
  - що є **позицією ВС / практикою**;
  - що є **висновком** (аналітичне узагальнення).
- **Показувати ризики**: контраргументи, альтернативні підходи, процесуальні “провали”.

## 2) Універсальний шаблон відповіді (рекомендований)

### A. Короткий висновок (1–3 речення)

- **Висновок**: …
- **За яких умов**: …
- **Ризик/виняток**: …

### B. Норма / правова рамка

- **Норма**: назва акта + стаття/частина/пункт.
- **Цитата**: 1–3 речення тексту норми (без “води”).
- **Коментар**: що саме з норми важливо для питання.

> Формат цитування норми:
> - `Акт, стаття/частина` — «…цитата…»

### C. Позиція Верховного Суду (правові висновки)

- **Ключова теза ВС #1**: …
  - **Що саме сказав суд** (1–2 цитати з мотивувальної): «…»
  - **Контекст застосування**: коротко (які факти/процесуальна ситуація).
- **Ключова теза ВС #2** (за потреби): …

> Важливо: для тези ВС показувати, що це саме **COURT_REASONING** (мотивування), а не факт/резолютивка.

### D. Практика (підбірка рішень) — 5–10 справ

Для кожної справи:
- **Реквізити**: Суд / палата, дата, № справи.
- **Суть корисності**: 1 рядок “чим підходить”.
- **Цитата**: 1 короткий фрагмент з `COURT_REASONING` або `DECISION`.

> Рекомендований JSON-подібний формат усередині відповіді (зручно для UI):
> - `case_number`, `court`, `date`, `relevance_reason`, `quote`, `section_type`

### E. “Критерії / тест” (якщо питання про оцінку)

- **Критерії, які застосовує суд**:
  - Критерій 1 — …
  - Критерій 2 — …
  - Критерій 3 — …

Цей блок найцінніший для юриста: його вставляють у процесуальний документ як структуру аргументації.

### F. Контраргументи / ризики

- **Контраргумент 1**: … (посилання на рішення/норму)
- **Контраргумент 2**: …
- **Процесуальні ризики**: типові підстави для відмови/повернення/залишення без руху.

### G. Що робити (чеклист дій/доказів)

- **Кроки**:
  - Крок 1 — …
  - Крок 2 — …
- **Докази**:
  - Доказ 1 — …
  - Доказ 2 — …


## 3) Варіанти “упаковки” під тип запиту

### 3.1 Позиція ВС щодо питання

**Відповідь повинна містити**:
- Висновок (A)
- 2–4 тези ВС (C)
- 5–10 справ (D)
- контраргументи/альтернативні підходи (F)

### 3.2 Процесуальне питання (строки/допустимість/підсудність)

**Відповідь повинна містити**:
- Норма (B)
- Практика застосування (C + D)
- Чеклист дій/доказів (G)

### 3.3 Питання про докази

**Відповідь повинна містити**:
- Стандарт/підхід суду (E)
- Приклади, коли прийняли/не прийняли (D “за/проти”)

### 3.4 Гроші (пеня/3%/інфляційні/витрати)

**Відповідь повинна містити**:
- Рамка норми (B)
- Практика розрахунку (C)
- Приклади з `AMOUNTS` (D)


## 4) Які секції рішення потрібні для різних питань (мапа)

- **Строки / допустимість / повернення / без руху**: `COURT_REASONING`, `DECISION`, `LAW_REFERENCES`
- **Підсудність / юрисдикція**: `COURT_REASONING`, `LAW_REFERENCES`
- **Докази / експертиза / електронні докази**: `FACTS`, `COURT_REASONING`
- **Позиція ВС (тези)**: `COURT_REASONING` (+ інколи `DECISION`)
- **Суми/санкції**: `AMOUNTS`, `COURT_REASONING`


## 5) Що додати до поточної intent-моделі (task-based intents)

### 5.1 Чому task-based краще за “галузеві” intents

Поточні intents в бекенді виглядають як “теми спорів” (наприклад, tax/labor/consumer). Для процесу і позицій ВС краще класифікувати **за задачею**, бо одна і та сама задача є в різних категоріях спорів.

### 5.2 Рекомендовані intents для судів/процесу

1. `supreme_court_position`
   - Коли користувач просить: “позиція ВС”, “правовий висновок”, “критерії ВС”, “практика ВС”.
2. `procedural_deadlines`
   - “строк”, “поновлення строку”, “початок перебігу”, “пропуск строку”.
3. `admissibility_and_formal_requirements`
   - “залишити без руху”, “повернення”, “без розгляду”, “закриття провадження”.
4. `jurisdiction_and_competence`
   - “підсудність”, “юрисдикція”, “підвідомчість”.
5. `evidence_and_standards`
   - “докази”, “належність/допустимість”, “тягар доказування”, “експертиза”, “електронні докази”.
6. `interim_measures`
   - “забезпечення позову”, “забезпечення доказів”, “витребування доказів”.
7. `amounts_and_costs`
   - “пеня/штраф/3%/інфляційні”, “судові витрати”, “правнича допомога”.
8. `two_sided_practice`
   - Коли прямо просять “за/проти”, “дві лінії практики”.

### 5.3 Рекомендовані слоти (required_entities)

Мінімальний набір, який підвищить якість retrieval і зменшить “розмиті” відповіді:

- `procedure_code`: `ЦПК` | `ГПК` | `КАС` | `КПК`
- `court_level`: `first_instance` | `appeal` | `cassation` | `SC` | `GrandChamber`
- `case_category` (опціонально): “банк”, “оренда”, “поставка”, “відшкодування шкоди”…
- `law_article`: стаття/частина/пункт (якщо користувач вказав)
- `time_range`: `{from,to}` або “останні N років”
- `section_focus`: масив секцій (`FACTS`, `COURT_REASONING`, …)
- `money_terms`: `{penalty:true, inflation:true, three_percent:true, legal_fees:true}`
- `desired_output`: ` теза | чеклист | таблиця | підбірка | порівняння `


## 6) Маппінг intent → retrieval/інструменти (під вашу архітектуру)

### 6.1 Базовий пошук практики

- Інструмент: `search_legal_precedents`
- Для `supreme_court_position`: фільтрувати/ранжувати за наявністю “правовий висновок/позиція” та за судом (якщо метадані є), фокус на `COURT_REASONING`.

### 6.2 Пошук “схожого мотивування”

- Інструмент: `get_similar_reasoning`
- Вхід: “теза/аргумент” або короткий опис фактів.
- `section_type`: зазвичай `COURT_REASONING`.

### 6.3 Паттерни/статистика аргументів

- Інструмент: `analyze_case_pattern`
- Використання: коли запит про “що працює/що не працює”, “типові ризики”, “результати”.

### 6.4 Норма ↔ практика (якщо потрібно підтягувати норму/статтю)

- Інструмент: `search_legislation_text` (RADA)
- Опція: `include_court_citations=true` для сценарію “стаття → релевантні справи”.


## 7) Мінімальні правила якості (SLA для відповіді)

- **Не менше 3 джерел** у відповідях про позицію/практику (якщо база дозволяє).
- **Цитати тільки з джерел** (не вигадувати реквізити).
- Якщо практика **неоднорідна** — явно позначати “є дві лінії”, і показувати обидві.
- Якщо запит **про процес** — завжди давати **чеклист** + типові підстави відмов.

