<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MCP Legal Tools API Documentation</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        :root {
            --primary: #1a1f36;
            --accent: #3b82f6;
            --accent-hover: #2563eb;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --background: #ffffff;
            --surface: #f8fafc;
            --border: #e2e8f0;
            --text-primary: #1e293b;
            --text-secondary: #64748b;
            --code-bg: #1e293b;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            line-height: 1.6;
            color: var(--text-primary);
            background: var(--background);
            display: flex;
            flex-direction: column;
            height: 100vh;
            overflow: hidden;
        }

        /* Top Navigation */
        .top-nav {
            background: var(--primary);
            color: white;
            padding: 0 2rem;
            height: 64px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            flex-shrink: 0;
        }

        .logo {
            font-size: 1.25rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .version-badge {
            background: var(--accent);
            padding: 0.25rem 0.75rem;
            border-radius: 6px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .search-container {
            position: relative;
            flex: 1;
            max-width: 400px;
            margin: 0 2rem;
        }

        .search-icon {
            position: absolute;
            left: 0.75rem;
            top: 50%;
            transform: translateY(-50%);
            color: rgba(255,255,255,0.5);
            pointer-events: none;
        }

        .search-icon svg {
            width: 18px;
            height: 18px;
        }

        .search-input {
            width: 100%;
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
            color: white;
            padding: 0.5rem 1rem 0.5rem 2.5rem;
            border-radius: 6px;
            font-size: 0.875rem;
        }

        .search-input::placeholder {
            color: rgba(255,255,255,0.5);
        }

        .search-input:focus {
            outline: none;
            border-color: var(--accent);
            background: rgba(255,255,255,0.15);
        }

        /* Main Layout */
        .main-container {
            display: flex;
            height: calc(100vh - 64px);
            overflow: hidden;
        }

        /* Sidebar */
        .sidebar {
            width: 280px;
            background: var(--surface);
            border-right: 1px solid var(--border);
            overflow-y: auto;
            flex-shrink: 0;
        }

        .sidebar-controls {
            padding: 0.75rem 1rem;
            background: var(--background);
            border-bottom: 2px solid var(--border);
            display: flex;
            flex-direction: row;
            gap: 0.5rem;
            align-items: center;
            justify-content: space-between;
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .control-btn {
            width: 36px;
            height: 36px;
            background: var(--surface);
            color: var(--text-primary);
            border: 1px solid var(--border);
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
        }

        .control-btn:hover {
            background: var(--accent);
            color: white;
            border-color: var(--accent);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .control-btn svg {
            width: 18px;
            height: 18px;
        }

        .control-btn[data-tooltip]::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: -35px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--primary);
            color: white;
            padding: 0.4rem 0.6rem;
            border-radius: 4px;
            font-size: 0.7rem;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.2s;
            z-index: 1000;
        }

        .control-btn:hover[data-tooltip]::after {
            opacity: 1;
        }

        .controls-divider {
            width: 1px;
            height: 24px;
            background: var(--border);
        }

        .sidebar-section {
            border-bottom: 1px solid var(--border);
        }

        .sidebar-section-header {
            padding: 1rem 1.25rem;
            font-weight: 600;
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--text-secondary);
            background: var(--background);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: space-between;
            user-select: none;
            transition: background 0.15s;
        }

        .sidebar-section-header:hover {
            background: var(--surface);
        }

        .collapse-icon {
            transition: transform 0.2s;
            font-size: 0.75rem;
        }

        .sidebar-section.collapsed .collapse-icon {
            transform: rotate(-90deg);
        }

        .sidebar-section.collapsed .sidebar-items {
            display: none;
        }

        .sidebar-item {
            padding: 0.75rem 1.25rem;
            cursor: pointer;
            border-left: 3px solid transparent;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-size: 0.875rem;
            transition: all 0.15s;
            background: var(--background);
        }

        .sidebar-item:hover {
            background: var(--surface);
            border-left-color: var(--accent);
        }

        .sidebar-item.active {
            background: #eff6ff;
            border-left-color: var(--accent);
            color: var(--accent);
            font-weight: 500;
        }

        .method-badge {
            padding: 0.15rem 0.5rem;
            border-radius: 4px;
            font-size: 0.65rem;
            font-weight: 700;
            text-transform: uppercase;
            flex-shrink: 0;
        }

        .method-post {
            background: var(--accent);
            color: white;
        }

        .method-get {
            background: var(--success);
            color: white;
        }

        .method-premium {
            background: var(--warning);
            color: white;
        }

        /* Content Area */
        .content-area {
            flex: 1;
            overflow-y: auto;
            background: var(--background);
        }

        .content-wrapper {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        /* Endpoint Card */
        .endpoint-card {
            background: var(--background);
            border: 1px solid var(--border);
            border-radius: 8px;
            margin-bottom: 2rem;
            overflow: hidden;
        }

        .endpoint-header {
            background: var(--surface);
            padding: 1.5rem;
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .endpoint-method {
            padding: 0.5rem 1rem;
            border-radius: 6px;
            font-weight: 700;
            font-size: 0.875rem;
            text-transform: uppercase;
            flex-shrink: 0;
        }

        .endpoint-path {
            font-family: 'Courier New', monospace;
            font-size: 1rem;
            color: var(--text-primary);
            flex: 1;
            word-break: break-all;
        }

        .endpoint-body {
            padding: 1.5rem;
        }

        .tags-container {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
        }

        .tag {
            padding: 0.35rem 0.75rem;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 500;
            border: 1px solid;
        }

        .tag-cost {
            background: #fef3c7;
            color: #92400e;
            border-color: #fcd34d;
        }

        .tag-category {
            background: #e0e7ff;
            color: #3730a3;
            border-color: #c7d2fe;
        }

        .section-title {
            font-size: 0.875rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--text-secondary);
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid var(--border);
        }

        .description {
            color: var(--text-secondary);
            margin-bottom: 1.5rem;
            line-height: 1.7;
        }

        /* Parameters Table */
        .params-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 1.5rem;
            font-size: 0.875rem;
            border: 1px solid var(--border);
            border-radius: 6px;
            overflow: hidden;
        }

        .params-table th {
            text-align: left;
            padding: 0.75rem;
            background: var(--surface);
            font-weight: 600;
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.3px;
            color: var(--text-secondary);
            border-bottom: 1px solid var(--border);
        }

        .params-table td {
            padding: 0.75rem;
            border-bottom: 1px solid var(--border);
            vertical-align: top;
        }

        .params-table tr:last-child td {
            border-bottom: none;
        }

        .param-name {
            font-family: 'Courier New', monospace;
            color: var(--accent);
            font-weight: 600;
            font-size: 0.875rem;
        }

        .param-required {
            color: var(--danger);
            font-size: 0.75rem;
            font-weight: 600;
            margin-left: 0.5rem;
        }

        .param-type {
            color: var(--text-secondary);
            font-size: 0.8rem;
            font-family: 'Courier New', monospace;
        }

        /* Code Block */
        .code-container {
            margin-bottom: 1.5rem;
            border: 1px solid var(--border);
            border-radius: 6px;
            overflow: hidden;
        }

        .code-header {
            background: var(--code-bg);
            color: white;
            padding: 0.75rem 1rem;
            font-size: 0.875rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .code-label {
            font-weight: 500;
        }

        .copy-btn {
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.75rem;
            transition: all 0.15s;
        }

        .copy-btn:hover {
            background: rgba(255,255,255,0.2);
        }

        .code-block {
            background: var(--code-bg);
            color: #e2e8f0;
            padding: 1.25rem;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            font-size: 0.8rem;
            line-height: 1.6;
            margin: 0;
        }

        /* Try It Out Section */
        .try-section {
            background: var(--surface);
            padding: 1.5rem;
            border-radius: 6px;
            border: 1px solid var(--border);
            margin-top: 1.5rem;
        }

        .try-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1rem;
        }

        .try-title {
            font-weight: 600;
            color: var(--text-primary);
        }

        .try-toggle {
            background: var(--accent);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.15s;
            font-size: 0.875rem;
        }

        .try-toggle:hover {
            background: var(--accent-hover);
        }

        .try-form {
            display: none;
            margin-top: 1rem;
        }

        .try-form.active {
            display: block;
        }

        .form-group {
            margin-bottom: 1rem;
        }

        .form-label {
            display: block;
            font-size: 0.875rem;
            font-weight: 500;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
        }

        .form-input, .form-textarea {
            width: 100%;
            padding: 0.5rem 0.75rem;
            border: 1px solid var(--border);
            border-radius: 6px;
            font-size: 0.875rem;
            font-family: 'Courier New', monospace;
        }

        .form-textarea {
            min-height: 100px;
            resize: vertical;
        }

        .form-input:focus, .form-textarea:focus {
            outline: none;
            border-color: var(--accent);
        }

        .execute-btn {
            background: var(--success);
            color: white;
            border: none;
            padding: 0.625rem 1.5rem;
            border-radius: 6px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.15s;
            font-size: 0.875rem;
        }

        .execute-btn:hover {
            opacity: 0.9;
        }

        .execute-btn:disabled {
            background: var(--text-secondary);
            cursor: not-allowed;
        }

        .response-container {
            margin-top: 1rem;
            display: none;
        }

        .response-container.active {
            display: block;
        }

        .response-header {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
        }

        .status-badge {
            padding: 0.25rem 0.75rem;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .status-success {
            background: #d1fae5;
            color: #065f46;
        }

        .status-error {
            background: #fee2e2;
            color: #991b1b;
        }

        /* Welcome Screen */
        .welcome-screen {
            text-align: center;
            padding: 4rem 2rem;
            max-width: 800px;
            margin: 0 auto;
        }

        .welcome-logo {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, var(--accent), var(--accent-hover));
            border-radius: 20px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1.5rem;
            box-shadow: 0 8px 24px rgba(59, 130, 246, 0.3);
        }

        .welcome-logo svg {
            width: 48px;
            height: 48px;
            color: white;
        }

        .welcome-title {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            color: var(--primary);
        }

        .welcome-subtitle {
            font-size: 1.2rem;
            color: var(--text-secondary);
            margin-bottom: 2rem;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1.5rem;
            margin-top: 3rem;
        }

        .stat-box {
            padding: 1.5rem;
            border: 1px solid var(--border);
            border-radius: 8px;
            background: var(--surface);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--accent);
            margin-bottom: 0.5rem;
        }

        .stat-label {
            color: var(--text-secondary);
            font-size: 0.875rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--surface);
        }

        ::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .main-container {
                flex-direction: column;
            }

            .sidebar {
                width: 100%;
                max-height: 40vh;
            }

            .search-container {
                margin: 0 1rem;
            }
        }

        .hidden {
            display: none !important;
        }

        /* Loading spinner */
        .spinner {
            display: inline-block;
            width: 14px;
            height: 14px;
            border: 2px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Breadcrumbs */
        .breadcrumbs {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.875rem;
            color: var(--text-secondary);
            margin-bottom: 1.5rem;
            padding: 0.75rem 1rem;
            background: var(--surface);
            border-radius: 6px;
            border: 1px solid var(--border);
        }

        .breadcrumb-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .breadcrumb-item svg {
            width: 14px;
            height: 14px;
        }

        .breadcrumb-link {
            display: flex;
            align-items: center;
            gap: 0.35rem;
            cursor: pointer;
            transition: color 0.15s;
        }

        .breadcrumb-link:hover {
            color: var(--accent);
        }

        .breadcrumb-separator {
            color: var(--border);
            margin: 0 0.25rem;
        }

        .breadcrumb-current {
            color: var(--accent);
            font-weight: 500;
        }

        /* Back to top button */
        .back-to-top {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            background: var(--accent);
            color: white;
            border: none;
            width: 52px;
            height: 52px;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 4px 16px rgba(59, 130, 246, 0.4);
            display: none;
            align-items: center;
            justify-content: center;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 100;
        }

        .back-to-top svg {
            width: 24px;
            height: 24px;
        }

        .back-to-top:hover {
            background: var(--accent-hover);
            transform: translateY(-4px);
            box-shadow: 0 8px 24px rgba(59, 130, 246, 0.5);
        }

        .back-to-top.visible {
            display: flex;
            animation: slideInUp 0.3s ease-out;
        }

        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* All endpoints view */
        .all-endpoints-view {
            display: none;
        }

        .all-endpoints-view.active {
            display: block;
        }

        .all-endpoints-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .endpoint-quick-card {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 6px;
            padding: 1rem;
            cursor: pointer;
            transition: all 0.15s;
        }

        .endpoint-quick-card:hover {
            border-color: var(--accent);
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            transform: translateY(-2px);
        }

        .endpoint-quick-header {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 0.5rem;
        }

        .endpoint-quick-name {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 0.875rem;
        }

        .endpoint-quick-desc {
            font-size: 0.8rem;
            color: var(--text-secondary);
            line-height: 1.5;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .endpoint-quick-footer {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-top: 0.75rem;
            padding-top: 0.75rem;
            border-top: 1px solid var(--border);
        }

        .endpoint-quick-category {
            font-size: 0.7rem;
            color: var(--text-secondary);
        }
    </style>
</head>
<body>
    <nav class="top-nav">
        <div class="logo">
            <span>MCP Legal Tools API</span>
            <span class="version-badge">v1.0</span>
        </div>
        <div class="search-container">
            <div class="search-icon">
                <i data-lucide="search"></i>
            </div>
            <input type="text" class="search-input" id="globalSearch" placeholder="Search endpoints...">
        </div>
    </nav>

    <div class="main-container">
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-controls">
                <button class="control-btn" onclick="viewAllEndpoints()" data-tooltip="View All">
                    <i data-lucide="layout-grid"></i>
                </button>
                <button class="control-btn" onclick="expandAll()" data-tooltip="Expand All">
                    <i data-lucide="chevrons-down"></i>
                </button>
                <button class="control-btn" onclick="collapseAll()" data-tooltip="Collapse All">
                    <i data-lucide="chevrons-up"></i>
                </button>
                <div class="controls-divider"></div>
                <button class="control-btn" onclick="location.reload()" data-tooltip="Home">
                    <i data-lucide="home"></i>
                </button>
            </div>
            <!-- Sidebar sections will be populated by JavaScript -->
        </aside>

        <main class="content-area" id="contentArea">
            <div class="welcome-screen" id="welcomeScreen">
                <h1 class="welcome-title">MCP Legal Tools API</h1>
                <p class="welcome-subtitle">Comprehensive legal analysis and research API for Ukrainian legislation</p>

                <div class="stats-grid">
                    <div class="stat-box">
                        <div class="stat-value">41</div>
                        <div class="stat-label">Endpoints</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value">7</div>
                        <div class="stat-label">Categories</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value">15+</div>
                        <div class="stat-label">Premium Tools</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value">REST</div>
                        <div class="stat-label">API Type</div>
                    </div>
                </div>
            </div>

            <div class="content-wrapper hidden" id="endpointContent"></div>

            <div class="content-wrapper all-endpoints-view" id="allEndpointsView">
                <h2 style="margin-bottom: 1rem;">All Endpoints</h2>
                <div class="all-endpoints-grid" id="allEndpointsGrid"></div>
            </div>
        </main>
    </div>

    <button class="back-to-top" id="backToTop" onclick="scrollToTop()">
        <i data-lucide="arrow-up"></i>
    </button>

    <script>
        // API Endpoints Database
        const apiData = {
            categories: [
                {
                    name: "Core Query Pipeline",
                    count: 4,
                    endpoints: ["classify_intent", "retrieve_legal_sources", "analyze_legal_patterns", "validate_response"]
                },
                {
                    name: "Legal Research",
                    count: 6,
                    endpoints: ["search_legal_precedents", "analyze_case_pattern", "get_similar_reasoning",
                                "search_supreme_court", "compare_practice", "find_similar_facts"]
                },
                {
                    name: "Document Analysis",
                    count: 3,
                    endpoints: ["extract_sections", "get_court_decision", "get_case_text"]
                },
                {
                    name: "Legislation Tools",
                    count: 7,
                    endpoints: ["get_legislation_article", "get_legislation_section", "get_legislation_articles",
                                "search_legislation", "get_legislation_structure", "find_relevant_articles",
                                "search_procedural_norms"]
                },
                {
                    name: "Document Vault",
                    count: 4,
                    endpoints: ["store_document", "get_document", "list_documents", "semantic_search"]
                },
                {
                    name: "Due Diligence",
                    count: 3,
                    endpoints: ["bulk_review_runner", "risk_scoring", "generate_dd_report"]
                },
                {
                    name: "Procedural Tools",
                    count: 4,
                    endpoints: ["check_precedent_status", "calculate_deadlines", "build_checklist", "calculate_claims"]
                },
                {
                    name: "Advanced Analysis",
                    count: 2,
                    endpoints: ["format_answer_pack", "get_legal_advice"]
                }
            ],
            endpoints: {
                classify_intent: {
                    method: "POST",
                    path: "/api/tools/classify_intent",
                    category: "Core Query Pipeline",
                    cost: null,
                    description: "Query classification system that determines service type, task complexity, and analysis depth. Serves as the entry-point for routing pipeline requests to appropriate handlers.",
                    parameters: [
                        { name: "query", type: "string", required: true, description: "The user query to classify" },
                        { name: "context", type: "object", required: false, description: "Additional context for classification" },
                        { name: "options", type: "ClassificationOptions", required: false, description: "Classification configuration options" }
                    ],
                    response: {
                        status: 200,
                        schema: `{
  "service_type": "string",
  "task_type": "string",
  "depth": "shallow | deep",
  "confidence": 0.95,
  "routing": {
    "handler": "string",
    "priority": "number"
  }
}`
                    },
                    example: `curl -X POST http://localhost:3000/api/tools/classify_intent \\
  -H "Authorization: Bearer YOUR_API_KEY" \\
  -H "Content-Type: application/json" \\
  -d '{
    "query": "Find cases about contract breach",
    "context": {
      "jurisdiction": "Ukraine"
    }
  }'`
                },
                retrieve_legal_sources: {
                    method: "POST",
                    path: "/api/tools/retrieve_legal_sources",
                    category: "Core Query Pipeline",
                    cost: "$0.01-$0.05",
                    description: "RAG retrieval system that returns raw sources (cases/laws/guidance) without analysis. Core component for building legal research queries.",
                    parameters: [
                        { name: "context", type: "object", required: true, description: "Context with query field" },
                        { name: "limits", type: "object", required: false, description: "Limits for results (cases, laws, guidance)" },
                        { name: "limit", type: "number", required: false, description: "General limit if limits not specified" }
                    ],
                    response: {
                        status: 200,
                        schema: `{
  "cases": [{
    "id": "string",
    "url": "string",
    "title": "string",
    "court": "string",
    "date": "string",
    "summary": "string"
  }],
  "laws": [{
    "rada_id": "string",
    "title": "string",
    "articles": []
  }],
  "guidance": [{
    "title": "string",
    "source": "string",
    "text": "string"
  }],
  "total_found": {
    "cases": 0,
    "laws": 0,
    "guidance": 0
  }
}`
                    },
                    example: `curl -X POST http://localhost:3000/api/tools/retrieve_legal_sources \\
  -H "Authorization: Bearer YOUR_API_KEY" \\
  -H "Content-Type: application/json" \\
  -d '{
    "context": {
      "query": "поновлення пропущеного строку апеляції"
    },
    "limits": {
      "cases": 5,
      "laws": 3,
      "guidance": 2
    }
  }'`
                },
                analyze_legal_patterns: {
                    method: "POST",
                    path: "/api/tools/analyze_legal_patterns",
                    category: "Core Query Pipeline",
                    cost: "$0.02-$0.08",
                    description: "Extracts success arguments and risk factors from legal documents using pattern analysis and machine learning.",
                    parameters: [
                        { name: "documents", type: "array", required: false, description: "Array of documents to analyze" },
                        { name: "query", type: "string", required: false, description: "Query for contextualizing the analysis" }
                    ],
                    response: {
                        status: 200,
                        schema: `{
  "patterns": [{
    "pattern_id": "string",
    "intent": "string",
    "success_arguments": [{
      "argument": "string",
      "source": "string",
      "frequency": 0,
      "confidence": 0.0
    }],
    "risk_factors": [{
      "risk": "string",
      "severity": "low | medium | high | critical",
      "source": "string",
      "mitigation": "string"
    }],
    "outcome_stats": {
      "total_cases": 0,
      "favorable": 0,
      "unfavorable": 0
    }
  }]
}`
                    },
                    example: `curl -X POST http://localhost:3000/api/tools/analyze_legal_patterns \\
  -H "Authorization: Bearer YOUR_API_KEY" \\
  -H "Content-Type: application/json" \\
  -d '{
    "query": "поновлення строку апеляції",
    "documents": [{
      "id": "110679112",
      "text": "...",
      "title": "Постанова ВС"
    }]
  }'`
                },
                validate_response: {
                    method: "POST",
                    path: "/api/tools/validate_response",
                    category: "Core Query Pipeline",
                    cost: "$0.005-$0.02",
                    description: "Trust layer that validates responses against sources to prevent hallucinations and ensure accuracy.",
                    parameters: [
                        { name: "answer", type: "string", required: true, description: "Answer to validate" },
                        { name: "sources", type: "array", required: true, description: "Array of sources that should support the answer" }
                    ],
                    response: {
                        status: 200,
                        schema: `{
  "is_valid": true,
  "confidence": 0.95,
  "validation_details": {
    "supported_claims": [{
      "claim": "string",
      "source_id": "string",
      "quote": "string",
      "match_score": 0.98
    }],
    "unsupported_claims": [],
    "missing_sources": []
  },
  "hallucination_risk": "none | low | medium | high"
}`
                    },
                    example: `curl -X POST http://localhost:3000/api/tools/validate_response \\
  -H "Authorization: Bearer YOUR_API_KEY" \\
  -H "Content-Type: application/json" \\
  -d '{
    "answer": "Строк апеляції становить 30 днів",
    "sources": [{
      "id": "cpc-354",
      "text": "Апеляційна скарга подається протягом 30 днів",
      "title": "ЦПК України, ст. 354"
    }]
  }'`
                },
                search_legal_precedents: {
                    method: "POST",
                    path: "/api/tools/search_legal_precedents",
                    category: "Legal Research",
                    cost: "$0.03-$0.10",
                    description: "Advanced semantic search for legal precedents with comprehensive analysis capabilities. Powered by vector similarity and contextual understanding.",
                    parameters: [
                        { name: "query", type: "string", required: true, description: "Legal research query" },
                        { name: "jurisdiction", type: "string", required: false, description: "Jurisdiction filter" },
                        { name: "date_from", type: "string", required: false, description: "Start date (ISO format)" },
                        { name: "date_to", type: "string", required: false, description: "End date (ISO format)" },
                        { name: "court_level", type: "string", required: false, description: "Court level filter" },
                        { name: "limit", type: "number", required: false, description: "Maximum results (default: 20)" }
                    ],
                    response: {
                        status: 200,
                        schema: `{
  "precedents": [{
    "case_id": "string",
    "title": "string",
    "date": "ISO8601",
    "court": "string",
    "relevance_score": 0.92,
    "summary": "string",
    "citations": ["string"]
  }],
  "total": 15,
  "cost": 0.05
}`
                    },
                    example: `curl -X POST http://localhost:3000/api/tools/search_legal_precedents \\
  -H "Authorization: Bearer YOUR_API_KEY" \\
  -H "Content-Type: application/json" \\
  -d '{
    "query": "порушення договору постачання",
    "court_level": "Supreme Court",
    "limit": 20
  }'`
                },
                analyze_case_pattern: {
                    method: "POST",
                    path: "/api/tools/analyze_case_pattern",
                    category: "Legal Research",
                    cost: "$0.02-$0.08",
                    description: "Analyzes court practice patterns including arguments, risks, and outcome statistics for similar cases.",
                    parameters: [
                        { name: "intent", type: "string", required: true, description: "Intent or situation type to analyze" },
                        { name: "case_ids", type: "array", required: false, description: "Array of case IDs to analyze (optional)" }
                    ],
                    response: {
                        status: 200,
                        schema: `{
  "pattern_summary": {
    "intent": "string",
    "total_cases_analyzed": 0,
    "confidence": 0.85
  },
  "success_arguments": [{
    "argument": "string",
    "frequency": 0,
    "success_rate": 0.75,
    "example_cases": []
  }],
  "risk_factors": [{
    "risk": "string",
    "severity": "low | medium | high",
    "probability": 0.3
  }],
  "outcome_statistics": {
    "total_cases": 0,
    "success_rate": 0.68
  }
}`
                    },
                    example: `curl -X POST http://localhost:3000/api/tools/analyze_case_pattern \\
  -H "Authorization: Bearer YOUR_API_KEY" \\
  -H "Content-Type: application/json" \\
  -d '{
    "intent": "поновлення строку апеляції"
  }'`
                },
                get_similar_reasoning: {
                    method: "POST",
                    path: "/api/tools/get_similar_reasoning",
                    category: "Legal Research",
                    cost: "$0.01-$0.03",
                    description: "Finds similar court reasoning by vector similarity matching across court decisions.",
                    parameters: [
                        { name: "query", type: "string", required: true, description: "Query text or reasoning to find similar matches" },
                        { name: "section_type", type: "string", required: false, description: "Section type filter (FACTS, COURT_REASONING, DECISION)" },
                        { name: "date_from", type: "string", required: false, description: "Start date filter" },
                        { name: "date_to", type: "string", required: false, description: "End date filter" },
                        { name: "limit", type: "number", required: false, description: "Maximum results (default: 10)" }
                    ],
                    response: {
                        status: 200,
                        schema: `{
  "similar_reasoning": [{
    "doc_id": "string",
    "case_number": "string",
    "court": "string",
    "date": "string",
    "similarity_score": 0.88,
    "reasoning_text": "string",
    "key_points": []
  }]
}`
                    },
                    example: `curl -X POST http://localhost:3000/api/tools/get_similar_reasoning \\
  -H "Authorization: Bearer YOUR_API_KEY" \\
  -H "Content-Type: application/json" \\
  -d '{
    "query": "заявник не довів поважності причин",
    "section_type": "COURT_REASONING",
    "limit": 5
  }'`
                },
                search_supreme_court: {
                    method: "POST",
                    path: "/api/tools/search_supreme_court_practice",
                    category: "Legal Research",
                    cost: "$0.02-$0.06",
                    description: "Search Supreme Court practice including chambers (ВП/КЦС/КГС/КАС/ККС) with brief excerpts.",
                    parameters: [
                        { name: "procedure_code", type: "string", required: true, description: "Procedure code (cpc, gpc, cac, crpc)" },
                        { name: "query", type: "string", required: true, description: "Search query" },
                        { name: "time_range", type: "string | object", required: false, description: "Date range filter" },
                        { name: "court_level", type: "string", required: false, description: "Court level (SC, GrandChamber)" },
                        { name: "limit", type: "number", required: false, description: "Maximum results (default: 10)" }
                    ],
                    response: {
                        status: 200,
                        schema: `{
  "supreme_court_cases": [{
    "doc_id": "string",
    "case_number": "string",
    "chamber": "ВП | КЦС | КГС | КАС | ККС",
    "date": "string",
    "legal_position": "string",
    "key_conclusions": []
  }]
}`
                    },
                    example: `curl -X POST http://localhost:3000/api/tools/search_supreme_court_practice \\
  -H "Authorization: Bearer YOUR_API_KEY" \\
  -H "Content-Type: application/json" \\
  -d '{
    "procedure_code": "cpc",
    "query": "строки апеляційного оскарження",
    "limit": 5
  }'`
                },
                compare_practice: {
                    method: "POST",
                    path: "/api/tools/compare_practice_pro_contra",
                    category: "Legal Research",
                    cost: "$0.05-$0.15",
                    description: "Collection of practice for/against a thesis - identifies two lines of practice and compares them.",
                    parameters: [
                        { name: "procedure_code", type: "string", required: true, description: "Procedure code (cpc, gpc, cac, crpc)" },
                        { name: "query", type: "string", required: true, description: "Thesis to compare" },
                        { name: "time_range", type: "string | object", required: false, description: "Date range" },
                        { name: "limit", type: "number", required: false, description: "Cases per line (default: 7)" }
                    ],
                    response: {
                        status: 200,
                        schema: `{
  "thesis": "string",
  "pro_practice": {
    "summary": "string",
    "cases": [],
    "strength": "strong | moderate | weak",
    "count": 0
  },
  "contra_practice": {
    "summary": "string",
    "cases": [],
    "strength": "string",
    "count": 0
  },
  "analysis": {
    "dominant_position": "pro | contra | balanced"
  }
}`
                    },
                    example: `curl -X POST http://localhost:3000/api/tools/compare_practice_pro_contra \\
  -H "Authorization: Bearer YOUR_API_KEY" \\
  -H "Content-Type: application/json" \\
  -d '{
    "procedure_code": "cpc",
    "query": "можливість поновлення строку апеляції",
    "limit": 7
  }'`
                },
                find_similar_facts: {
                    method: "POST",
                    path: "/api/tools/find_similar_fact_pattern_cases",
                    category: "Legal Research",
                    cost: "$0.03-$0.08",
                    description: "Search cases by similar facts using key term extraction and semantic matching.",
                    parameters: [
                        { name: "procedure_code", type: "string", required: true, description: "Procedure code" },
                        { name: "facts_text", type: "string", required: true, description: "Text describing the facts" },
                        { name: "time_range", type: "string | object", required: false, description: "Date range" },
                        { name: "limit", type: "number", required: false, description: "Maximum results (default: 10)" }
                    ],
                    response: {
                        status: 200,
                        schema: `{
  "similar_cases": [{
    "doc_id": "string",
    "case_number": "string",
    "similarity_score": 0.82,
    "matching_facts": [],
    "key_differences": [],
    "applicability_score": 0.75
  }]
}`
                    },
                    example: `curl -X POST http://localhost:3000/api/tools/find_similar_fact_pattern_cases \\
  -H "Authorization: Bearer YOUR_API_KEY" \\
  -H "Content-Type: application/json" \\
  -d '{
    "procedure_code": "cpc",
    "facts_text": "Позивач не був належним чином повідомлений",
    "limit": 10
  }'`
                },
                extract_sections: {
                    method: "POST",
                    path: "/api/tools/extract_document_sections",
                    category: "Document Analysis",
                    cost: "$0.005-$0.05",
                    description: "Extracts structured sections from full text (FACTS, REASONING, DECISION) using HTML parsing or LLM analysis.",
                    parameters: [
                        { name: "doc_id", type: "string | number", required: false, description: "Document ID from ZakonOnline" },
                        { name: "text", type: "string", required: false, description: "Full text if already available" },
                        { name: "use_llm", type: "boolean", required: false, description: "Use LLM for precise extraction (default: false)" }
                    ],
                    response: {
                        status: 200,
                        schema: `{
  "document_id": "string",
  "sections": [{
    "type": "FACTS | COURT_REASONING | DECISION",
    "text": "string",
    "confidence": 0.95
  }],
  "document_metadata": {
    "sections_found": 0,
    "extraction_method": "html_parsing | llm_analysis"
  }
}`
                    },
                    example: `curl -X POST http://localhost:3000/api/tools/extract_document_sections \\
  -H "Authorization: Bearer YOUR_API_KEY" \\
  -H "Content-Type: application/json" \\
  -d '{
    "doc_id": 110679112,
    "use_llm": false
  }'`
                },
                get_court_decision: {
                    method: "GET",
                    path: "/api/tools/get_court_decision/:id",
                    category: "Document Analysis",
                    cost: "$0.01-$0.08",
                    description: "Loads complete text of court decisions with automatic extraction of structured sections for analysis.",
                    parameters: [
                        { name: "doc_id", type: "string | number", required: false, description: "Court decision ID" },
                        { name: "case_number", type: "string", required: false, description: "Case number" },
                        { name: "depth", type: "number", required: false, description: "Detail depth (1-5, default: 2)" },
                        { name: "reasoning_budget", type: "string", required: false, description: "Analysis budget (quick, standard, deep)" }
                    ],
                    response: {
                        status: 200,
                        schema: `{
  "document": {
    "doc_id": "string",
    "case_number": "string",
    "court": "string",
    "date": "string"
  },
  "sections": {
    "facts": { "full_text": "string" },
    "court_reasoning": { "full_text": "string" },
    "decision": { "full_text": "string" }
  }
}`
                    },
                    example: `curl -X GET http://localhost:3000/api/tools/get_court_decision/110679112 \\
  -H "Authorization: Bearer YOUR_API_KEY"`
                },
                get_case_text: {
                    method: "GET",
                    path: "/api/tools/get_case_text/:id",
                    category: "Document Analysis",
                    cost: "$0.01-$0.08",
                    description: "Alias for get_court_decision - retrieves complete case text with structured sections.",
                    parameters: [
                        { name: "doc_id", type: "string | number", required: false, description: "Document ID" },
                        { name: "case_number", type: "string", required: false, description: "Case number" },
                        { name: "depth", type: "number", required: false, description: "Detail depth (1-5)" }
                    ],
                    response: {
                        status: 200,
                        schema: `{
  "document": {
    "doc_id": "string",
    "case_number": "string"
  },
  "sections": {
    "facts": {},
    "court_reasoning": {},
    "decision": {}
  }
}`
                    },
                    example: `curl -X GET http://localhost:3000/api/tools/get_case_text/110679112 \\
  -H "Authorization: Bearer YOUR_API_KEY"`
                },
                get_legislation_article: {
                    method: "GET",
                    path: "/api/tools/get_legislation_article",
                    category: "Legislation Tools",
                    cost: null,
                    description: "Get full text of specific legislation article (ЦПК, ГПК, КАС, КПК).",
                    parameters: [
                        { name: "rada_id", type: "string", required: true, description: "Legislation ID (e.g., 1618-15 for ЦПК)" },
                        { name: "article_number", type: "string", required: true, description: "Article number" },
                        { name: "include_html", type: "boolean", required: false, description: "Include formatted HTML" }
                    ],
                    response: {
                        status: 200,
                        schema: `{
  "rada_id": "string",
  "article_number": "string",
  "title": "string",
  "full_text": "string",
  "url": "string",
  "metadata": {
    "law_title": "string",
    "chapter": "string"
  }
}`
                    },
                    example: `curl -X POST http://localhost:3000/api/tools/get_legislation_article \\
  -H "Authorization: Bearer YOUR_API_KEY" \\
  -H "Content-Type: application/json" \\
  -d '{
    "rada_id": "1618-15",
    "article_number": "354"
  }'`
                },
                get_legislation_section: {
                    method: "GET",
                    path: "/api/tools/get_legislation_section",
                    category: "Legislation Tools",
                    cost: null,
                    description: "Get exact fragment/article by reference (e.g., 'ст. 625 ЦК') with automatic recognition.",
                    parameters: [
                        { name: "query", type: "string", required: false, description: "Reference query (e.g., 'ст. 354 ЦПК')" },
                        { name: "rada_id", type: "string", required: false, description: "Legislation ID" },
                        { name: "article_number", type: "string", required: false, description: "Article number" }
                    ],
                    response: {
                        status: 200,
                        schema: `{
  "rada_id": "string",
  "article_number": "string",
  "title": "string",
  "full_text": "string",
  "url": "string"
}`
                    },
                    example: `curl -X POST http://localhost:3000/api/tools/get_legislation_section \\
  -H "Authorization: Bearer YOUR_API_KEY" \\
  -H "Content-Type: application/json" \\
  -d '{
    "query": "ст. 625 ЦК"
  }'`
                },
                get_legislation_articles: {
                    method: "POST",
                    path: "/api/tools/get_legislation_articles",
                    category: "Legislation Tools",
                    cost: null,
                    description: "Get multiple articles of legislative act simultaneously.",
                    parameters: [
                        { name: "rada_id", type: "string", required: true, description: "Legislation ID" },
                        { name: "article_numbers", type: "array", required: true, description: "Array of article numbers" },
                        { name: "include_html", type: "boolean", required: false, description: "Include formatted HTML" }
                    ],
                    response: {
                        status: 200,
                        schema: `{
  "rada_id": "string",
  "total_found": 0,
  "articles": [{
    "article_number": "string",
    "title": "string",
    "full_text": "string"
  }]
}`
                    },
                    example: `curl -X POST http://localhost:3000/api/tools/get_legislation_articles \\
  -H "Authorization: Bearer YOUR_API_KEY" \\
  -H "Content-Type: application/json" \\
  -d '{
    "rada_id": "1618-15",
    "article_numbers": ["354", "355", "356"]
  }'`
                },
                search_legislation: {
                    method: "POST",
                    path: "/api/tools/search_legislation",
                    category: "Legislation Tools",
                    cost: "$0.005-$0.02",
                    description: "Semantic search for relevant legislation articles by query using vector embeddings.",
                    parameters: [
                        { name: "query", type: "string", required: true, description: "Search query" },
                        { name: "rada_id", type: "string", required: false, description: "Limit to specific legislation" },
                        { name: "limit", type: "number", required: false, description: "Maximum results (default: 10)" }
                    ],
                    response: {
                        status: 200,
                        schema: `{
  "query": "string",
  "total_found": 0,
  "articles": [{
    "rada_id": "string",
    "article_number": "string",
    "title": "string",
    "full_text": "string",
    "relevance_score": 0.85
  }]
}`
                    },
                    example: `curl -X POST http://localhost:3000/api/tools/search_legislation \\
  -H "Authorization: Bearer YOUR_API_KEY" \\
  -H "Content-Type: application/json" \\
  -d '{
    "query": "поновлення пропущеного строку",
    "limit": 10
  }'`
                },
                get_legislation_structure: {
                    method: "GET",
                    path: "/api/tools/get_legislation_structure",
                    category: "Legislation Tools",
                    cost: null,
                    description: "Get structure of legislative act (table of contents, chapters, articles).",
                    parameters: [
                        { name: "rada_id", type: "string", required: true, description: "Legislation ID" }
                    ],
                    response: {
                        status: 200,
                        schema: `{
  "rada_id": "string",
  "title": "string",
  "structure": [{
    "type": "chapter | section | article",
    "number": "string",
    "title": "string",
    "children": []
  }]
}`
                    },
                    example: `curl -X GET http://localhost:3000/api/tools/get_legislation_structure?rada_id=1618-15 \\
  -H "Authorization: Bearer YOUR_API_KEY"`
                },
                find_relevant_articles: {
                    method: "POST",
                    path: "/api/tools/find_relevant_law_articles",
                    category: "Legislation Tools",
                    cost: "$0.01-$0.02",
                    description: "Finds articles frequently applied in cases on a topic using case analysis.",
                    parameters: [
                        { name: "query", type: "string", required: true, description: "Topic query" },
                        { name: "limit", type: "number", required: false, description: "Maximum results" }
                    ],
                    response: {
                        status: 200,
                        schema: `{
  "query": "string",
  "articles": [{
    "rada_id": "string",
    "article_number": "string",
    "frequency": 0,
    "relevance_score": 0.88
  }]
}`
                    },
                    example: `curl -X POST http://localhost:3000/api/tools/find_relevant_law_articles \\
  -H "Authorization: Bearer YOUR_API_KEY" \\
  -H "Content-Type: application/json" \\
  -d '{
    "query": "договір поставки",
    "limit": 10
  }'`
                },
                search_procedural_norms: {
                    method: "POST",
                    path: "/api/tools/search_procedural_norms",
                    category: "Legislation Tools",
                    cost: "$0.005-$0.015",
                    description: "Smart search for procedural norms (ЦПК/ГПК) through RADA MCP.",
                    parameters: [
                        { name: "query", type: "string", required: true, description: "Procedural query" },
                        { name: "procedure_code", type: "string", required: false, description: "Procedure code (cpc, gpc)" }
                    ],
                    response: {
                        status: 200,
                        schema: `{
  "query": "string",
  "norms": [{
    "article": "string",
    "text": "string",
    "relevance": 0.82
  }]
}`
                    },
                    example: `curl -X POST http://localhost:3000/api/tools/search_procedural_norms \\
  -H "Authorization: Bearer YOUR_API_KEY" \\
  -H "Content-Type: application/json" \\
  -d '{
    "query": "залишення позову без розгляду",
    "procedure_code": "cpc"
  }'`
                },
                store_document: {
                    method: "POST",
                    path: "/api/tools/store_document",
                    category: "Document Vault",
                    cost: null,
                    description: "Stores documents in Vault with automatic processing: parse → extract → embed → analyze. Supports PDF, DOCX, TXT.",
                    parameters: [
                        { name: "file", type: "File", required: true, description: "Document file (PDF, DOCX, TXT)" },
                        { name: "title", type: "string", required: true, description: "Document title" },
                        { name: "type", type: "string", required: true, description: "Type: contract | court_decision | legal_opinion" },
                        { name: "tags", type: "array", required: false, description: "Document tags" },
                        { name: "metadata", type: "object", required: false, description: "Additional metadata" }
                    ],
                    response: {
                        status: 201,
                        schema: `{
  "document_id": "uuid",
  "status": "processed",
  "processing_time": 1250,
  "sections_extracted": 15,
  "embeddings_generated": 42
}`
                    },
                    example: `curl -X POST http://localhost:3000/api/tools/store_document \\
  -H "Authorization: Bearer YOUR_API_KEY" \\
  -F "file=@contract.pdf" \\
  -F "title=Supply Agreement 2024" \\
  -F "type=contract"`
                },
                get_document: {
                    method: "GET",
                    path: "/api/tools/get_document/:id",
                    category: "Document Vault",
                    cost: null,
                    description: "Get document from Vault by ID with all metadata and extracted sections.",
                    parameters: [
                        { name: "id", type: "string", required: true, description: "Document ID" }
                    ],
                    response: {
                        status: 200,
                        schema: `{
  "document_id": "uuid",
  "title": "string",
  "type": "string",
  "content": "string",
  "metadata": {},
  "sections": []
}`
                    },
                    example: `curl -X GET http://localhost:3000/api/tools/get_document/abc-123 \\
  -H "Authorization: Bearer YOUR_API_KEY"`
                },
                list_documents: {
                    method: "GET",
                    path: "/api/tools/list_documents",
                    category: "Document Vault",
                    cost: null,
                    description: "List documents in Vault with filtering and pagination support.",
                    parameters: [
                        { name: "type", type: "string", required: false, description: "Filter by document type" },
                        { name: "tags", type: "array", required: false, description: "Filter by tags" },
                        { name: "limit", type: "number", required: false, description: "Results per page" },
                        { name: "offset", type: "number", required: false, description: "Pagination offset" }
                    ],
                    response: {
                        status: 200,
                        schema: `{
  "documents": [{
    "document_id": "uuid",
    "title": "string",
    "type": "string",
    "uploadedAt": "ISO8601"
  }],
  "total": 42,
  "limit": 10,
  "offset": 0
}`
                    },
                    example: `curl -X GET "http://localhost:3000/api/tools/list_documents?type=contract&limit=10" \\
  -H "Authorization: Bearer YOUR_API_KEY"`
                },
                semantic_search: {
                    method: "POST",
                    path: "/api/tools/semantic_search",
                    category: "Document Vault",
                    cost: "$0.001-$0.01",
                    description: "Advanced semantic search across vault documents using vector embeddings and cosine similarity.",
                    parameters: [
                        { name: "query", type: "string", required: true, description: "Search query (max 8000 chars)" },
                        { name: "type", type: "string", required: false, description: "Filter by document type" },
                        { name: "tags", type: "array", required: false, description: "Filter by tags" },
                        { name: "limit", type: "number", required: false, description: "Maximum results (default: 10)" },
                        { name: "threshold", type: "number", required: false, description: "Minimum similarity 0-1 (default: 0.7)" }
                    ],
                    response: {
                        status: 200,
                        schema: `{
  "results": [{
    "document_id": "uuid",
    "title": "string",
    "similarity": 0.85,
    "preview": "string",
    "metadata": {}
  }],
  "total": 42
}`
                    },
                    example: `curl -X POST http://localhost:3000/api/tools/semantic_search \\
  -H "Authorization: Bearer YOUR_API_KEY" \\
  -H "Content-Type: application/json" \\
  -d '{
    "query": "форс мажор та непереборна сила",
    "type": "contract",
    "limit": 10
  }'`
                },
                bulk_review_runner: {
                    method: "POST",
                    path: "/api/tools/bulk_review_runner",
                    category: "Due Diligence",
                    cost: "Variable",
                    description: "Batch orchestration of document reviews for due diligence operations.",
                    parameters: [
                        { name: "document_ids", type: "array", required: true, description: "Array of document IDs to review" },
                        { name: "review_criteria", type: "object", required: true, description: "Review criteria and checklist" }
                    ],
                    response: {
                        status: 200,
                        schema: `{
  "review_id": "uuid",
  "total_documents": 0,
  "status": "processing | completed",
  "results": []
}`
                    },
                    example: `curl -X POST http://localhost:3000/api/tools/bulk_review_runner \\
  -H "Authorization: Bearer YOUR_API_KEY" \\
  -H "Content-Type: application/json" \\
  -d '{
    "document_ids": ["doc1", "doc2"],
    "review_criteria": {}
  }'`
                },
                risk_scoring: {
                    method: "POST",
                    path: "/api/tools/risk_scoring",
                    category: "Due Diligence",
                    cost: "$0.02-$0.05",
                    description: "Calculate risk scores for documents based on findings and analysis.",
                    parameters: [
                        { name: "document_id", type: "string", required: true, description: "Document ID" },
                        { name: "findings", type: "array", required: true, description: "Array of findings from review" }
                    ],
                    response: {
                        status: 200,
                        schema: `{
  "document_id": "string",
  "risk_score": 0.65,
  "risk_level": "low | medium | high | critical",
  "factors": []
}`
                    },
                    example: `curl -X POST http://localhost:3000/api/tools/risk_scoring \\
  -H "Authorization: Bearer YOUR_API_KEY" \\
  -H "Content-Type: application/json" \\
  -d '{
    "document_id": "doc123",
    "findings": []
  }'`
                },
                generate_dd_report: {
                    method: "POST",
                    path: "/api/tools/generate_dd_report",
                    category: "Due Diligence",
                    cost: "$0.03-$0.08",
                    description: "Generate formatted DD report with findings table and executive summary.",
                    parameters: [
                        { name: "review_id", type: "string", required: true, description: "Review session ID" },
                        { name: "format", type: "string", required: false, description: "Output format (pdf, docx, html)" }
                    ],
                    response: {
                        status: 200,
                        schema: `{
  "review_id": "string",
  "report_url": "string",
  "executive_summary": "string",
  "total_findings": 0
}`
                    },
                    example: `curl -X POST http://localhost:3000/api/tools/generate_dd_report \\
  -H "Authorization: Bearer YOUR_API_KEY" \\
  -H "Content-Type: application/json" \\
  -d '{
    "review_id": "review123",
    "format": "pdf"
  }'`
                },
                check_precedent_status: {
                    method: "POST",
                    path: "/api/tools/check_precedent_status",
                    category: "Procedural Tools",
                    cost: "$0.005-$0.015",
                    description: "Checks precedent validity and status: active, overturned, or questionable.",
                    parameters: [
                        { name: "case_id", type: "string", required: true, description: "Case ID to check" }
                    ],
                    response: {
                        status: 200,
                        schema: `{
  "case_id": "string",
  "status": "active | overturned | questionable",
  "confidence": 0.88,
  "notes": []
}`
                    },
                    example: `curl -X POST http://localhost:3000/api/tools/check_precedent_status \\
  -H "Authorization: Bearer YOUR_API_KEY" \\
  -H "Content-Type: application/json" \\
  -d '{
    "case_id": "110679112"
  }'`
                },
                calculate_deadlines: {
                    method: "POST",
                    path: "/api/tools/calculate_procedural_deadlines",
                    category: "Procedural Tools",
                    cost: null,
                    description: "Procedural deadline calculator with norm verification (approximate calculations).",
                    parameters: [
                        { name: "start_date", type: "string", required: true, description: "Start date (ISO format)" },
                        { name: "procedure_type", type: "string", required: true, description: "Procedure type (appeal, cassation)" },
                        { name: "procedure_code", type: "string", required: false, description: "Procedure code (cpc, gpc)" }
                    ],
                    response: {
                        status: 200,
                        schema: `{
  "start_date": "string",
  "deadline": "string",
  "business_days": 0,
  "calendar_days": 0,
  "legal_basis": "string"
}`
                    },
                    example: `curl -X POST http://localhost:3000/api/tools/calculate_procedural_deadlines \\
  -H "Authorization: Bearer YOUR_API_KEY" \\
  -H "Content-Type: application/json" \\
  -d '{
    "start_date": "2024-01-15",
    "procedure_type": "appeal",
    "procedure_code": "cpc"
  }'`
                },
                build_checklist: {
                    method: "POST",
                    path: "/api/tools/build_procedural_checklist",
                    category: "Procedural Tools",
                    cost: "$0.01-$0.03",
                    description: "Build procedural checklist with template and references to found norms.",
                    parameters: [
                        { name: "procedure_type", type: "string", required: true, description: "Procedure type" },
                        { name: "procedure_code", type: "string", required: false, description: "Procedure code" }
                    ],
                    response: {
                        status: 200,
                        schema: `{
  "procedure_type": "string",
  "checklist": [{
    "step": "string",
    "description": "string",
    "legal_basis": "string",
    "required": true
  }]
}`
                    },
                    example: `curl -X POST http://localhost:3000/api/tools/build_procedural_checklist \\
  -H "Authorization: Bearer YOUR_API_KEY" \\
  -H "Content-Type: application/json" \\
  -d '{
    "procedure_type": "appeal",
    "procedure_code": "cpc"
  }'`
                },
                calculate_claims: {
                    method: "POST",
                    path: "/api/tools/calculate_monetary_claims",
                    category: "Procedural Tools",
                    cost: null,
                    description: "Calculations for monetary claims with minimum 3% annual interest rate.",
                    parameters: [
                        { name: "principal", type: "number", required: true, description: "Principal amount" },
                        { name: "start_date", type: "string", required: true, description: "Start date for interest" },
                        { name: "end_date", type: "string", required: false, description: "End date (default: today)" },
                        { name: "interest_rate", type: "number", required: false, description: "Interest rate (default: 3%)" }
                    ],
                    response: {
                        status: 200,
                        schema: `{
  "principal": 0,
  "interest": 0,
  "total": 0,
  "interest_rate": 0.03,
  "days": 0,
  "calculation_details": {}
}`
                    },
                    example: `curl -X POST http://localhost:3000/api/tools/calculate_monetary_claims \\
  -H "Authorization: Bearer YOUR_API_KEY" \\
  -H "Content-Type: application/json" \\
  -d '{
    "principal": 100000,
    "start_date": "2023-01-01",
    "interest_rate": 0.03
  }'`
                },
                format_answer_pack: {
                    method: "POST",
                    path: "/api/tools/format_answer_pack",
                    category: "Advanced Analysis",
                    cost: null,
                    description: "Result packer in norm/position/conclusion/risks structure (structural, no text generation). Prepares data for process documents.",
                    parameters: [
                        { name: "desired_output", type: "string", required: false, description: "Desired output format" },
                        { name: "norm", type: "object | string", required: false, description: "Legal framework / norms" },
                        { name: "position", type: "object | string", required: false, description: "Court position / practice" },
                        { name: "conclusion", type: "object | string", required: false, description: "Conclusion" },
                        { name: "risks", type: "object | string", required: false, description: "Risks and counterarguments" }
                    ],
                    response: {
                        status: 200,
                        schema: `{
  "desired_output": "string",
  "norm": {},
  "position": {},
  "conclusion": {},
  "risks": {},
  "warning": "format_answer_pack performs structural packaging only"
}`
                    },
                    example: `curl -X POST http://localhost:3000/api/tools/format_answer_pack \\
  -H "Authorization: Bearer YOUR_API_KEY" \\
  -H "Content-Type: application/json" \\
  -d '{
    "norm": { "norms": [{"act": "ЦПК", "article_ref": "ст. 354"}] },
    "conclusion": "Строк не пропущено"
  }'`
                },
                get_legal_advice: {
                    method: "POST",
                    path: "/api/tools/get_legal_advice",
                    category: "Advanced Analysis",
                    cost: "$0.10-$0.30",
                    description: "Main tool: comprehensive legal analysis with source validation and hallucination detection. Most expensive and powerful tool in the system.",
                    parameters: [
                        { name: "query", type: "string", required: true, description: "Legal analysis query" },
                        { name: "reasoning_budget", type: "string", required: false, description: "Analysis budget: quick ($0.10) | standard ($0.15-$0.20) | deep ($0.25-$0.30)" }
                    ],
                    response: {
                        status: 200,
                        schema: `{
  "summary": "string",
  "confidence_score": 0.85,
  "intent": {},
  "relevant_patterns": [],
  "precedent_chunks": [],
  "packaged_answer": {
    "short_conclusion": {},
    "legal_framework": {},
    "supreme_court_positions": [],
    "practice": [],
    "criteria_test": [],
    "counterarguments_and_risks": [],
    "checklist": {},
    "sources": []
  },
  "reasoning_chain": [],
  "validation": {
    "is_valid": true,
    "confidence": 0.85
  }
}`
                    },
                    example: `curl -X POST http://localhost:3000/api/tools/get_legal_advice \\
  -H "Authorization: Bearer YOUR_API_KEY" \\
  -H "Content-Type: application/json" \\
  -d '{
    "query": "Чи можна поновити строк апеляції якщо повний текст отримано через 40 днів?",
    "reasoning_budget": "standard"
  }'`
                }
            }
        };

        // Initialize sidebar
        function initSidebar() {
            const sidebar = document.getElementById('sidebar');
            const controlsHtml = sidebar.querySelector('.sidebar-controls').outerHTML;

            let html = controlsHtml;

            apiData.categories.forEach(category => {
                html += `
                    <div class="sidebar-section">
                        <div class="sidebar-section-header" onclick="toggleSection(this)">
                            <span>${category.name} (${category.count})</span>
                            <span class="collapse-icon">▼</span>
                        </div>
                        <div class="sidebar-items">
                            ${category.endpoints.map(endpointKey => {
                                const endpoint = apiData.endpoints[endpointKey];
                                if (!endpoint) return '';

                                const methodClass = endpoint.method === 'GET' ? 'method-get' :
                                                   endpoint.cost ? 'method-premium' : 'method-post';

                                return `
                                    <div class="sidebar-item" data-endpoint="${endpointKey}">
                                        <span class="method-badge ${methodClass}">${endpoint.method}</span>
                                        <span>${endpointKey}</span>
                                    </div>
                                `;
                            }).join('')}
                        </div>
                    </div>
                `;
            });

            sidebar.innerHTML = html;

            // Add click handlers
            document.querySelectorAll('.sidebar-item').forEach(item => {
                item.addEventListener('click', function() {
                    const endpoint = this.dataset.endpoint;
                    loadEndpoint(endpoint);

                    document.querySelectorAll('.sidebar-item').forEach(i => i.classList.remove('active'));
                    this.classList.add('active');
                });
            });

            // Reinitialize Lucide icons after sidebar update
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            }
        }

        // Expand all sections
        function expandAll() {
            document.querySelectorAll('.sidebar-section').forEach(section => {
                section.classList.remove('collapsed');
            });
        }

        // Collapse all sections
        function collapseAll() {
            document.querySelectorAll('.sidebar-section').forEach(section => {
                section.classList.add('collapsed');
            });
        }

        // View all endpoints
        function viewAllEndpoints() {
            document.getElementById('welcomeScreen').classList.add('hidden');
            document.getElementById('endpointContent').classList.add('hidden');
            document.getElementById('allEndpointsView').classList.add('active');

            const grid = document.getElementById('allEndpointsGrid');
            let html = '';

            Object.keys(apiData.endpoints).forEach(key => {
                const endpoint = apiData.endpoints[key];
                const methodClass = endpoint.method === 'GET' ? 'method-get' :
                                   endpoint.cost ? 'method-premium' : 'method-post';

                html += `
                    <div class="endpoint-quick-card" onclick="loadEndpointFromAll('${key}')">
                        <div class="endpoint-quick-header">
                            <span class="method-badge ${methodClass}">${endpoint.method}</span>
                            <span class="endpoint-quick-name">${key}</span>
                        </div>
                        <div class="endpoint-quick-desc">${endpoint.description}</div>
                        <div class="endpoint-quick-footer">
                            <span class="endpoint-quick-category">${endpoint.category}</span>
                            ${endpoint.cost ? `<span class="tag tag-cost">${endpoint.cost}</span>` : ''}
                        </div>
                    </div>
                `;
            });

            grid.innerHTML = html;
            document.getElementById('contentArea').scrollTop = 0;
        }

        // Load endpoint from all view
        function loadEndpointFromAll(endpointKey) {
            document.getElementById('allEndpointsView').classList.remove('active');
            loadEndpoint(endpointKey);
        }

        // Scroll to top
        function scrollToTop() {
            document.getElementById('contentArea').scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }

        // Show/hide back to top button
        document.addEventListener('DOMContentLoaded', () => {
            const contentArea = document.getElementById('contentArea');
            const backToTop = document.getElementById('backToTop');

            contentArea.addEventListener('scroll', () => {
                if (contentArea.scrollTop > 300) {
                    backToTop.classList.add('visible');
                } else {
                    backToTop.classList.remove('visible');
                }
            });
        });

        // Toggle sidebar section
        function toggleSection(header) {
            const section = header.parentElement;
            section.classList.toggle('collapsed');
        }

        // Load endpoint content
        function loadEndpoint(endpointKey) {
            const endpoint = apiData.endpoints[endpointKey];
            if (!endpoint) return;

            document.getElementById('welcomeScreen').classList.add('hidden');
            document.getElementById('endpointContent').classList.remove('hidden');
            document.getElementById('allEndpointsView').classList.remove('active');

            const methodClass = endpoint.method === 'GET' ? 'method-get' :
                               endpoint.cost ? 'method-premium' : 'method-post';

            // Build breadcrumbs
            const breadcrumbs = `
                <div class="breadcrumbs">
                    <div class="breadcrumb-item">
                        <span class="breadcrumb-link" onclick="location.reload()">
                            <i data-lucide="home"></i>
                            Home
                        </span>
                        <span class="breadcrumb-separator">›</span>
                    </div>
                    <div class="breadcrumb-item">
                        <span><i data-lucide="folder"></i> ${endpoint.category}</span>
                        <span class="breadcrumb-separator">›</span>
                    </div>
                    <div class="breadcrumb-item">
                        <span class="breadcrumb-current"><i data-lucide="file-text"></i> ${endpoint.name || endpointKey}</span>
                    </div>
                </div>
            `;

            let parametersHtml = '';
            if (endpoint.parameters && endpoint.parameters.length > 0) {
                parametersHtml = `
                    <div class="section-title">Parameters</div>
                    <table class="params-table">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Type</th>
                                <th>Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${endpoint.parameters.map(p => `
                                <tr>
                                    <td>
                                        <span class="param-name">${p.name}</span>
                                        ${p.required ? '<span class="param-required">* required</span>' : ''}
                                    </td>
                                    <td><span class="param-type">${p.type}</span></td>
                                    <td>${p.description}</td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                `;
            }

            // Build try it out form
            let tryFormHtml = '';
            if (endpoint.parameters && endpoint.parameters.length > 0) {
                tryFormHtml = endpoint.parameters.map(p => {
                    if (p.type === 'File') {
                        return `
                            <div class="form-group">
                                <label class="form-label">${p.name}${p.required ? ' *' : ''}</label>
                                <input type="file" class="form-input" name="${p.name}" ${p.required ? 'required' : ''}>
                            </div>
                        `;
                    } else if (p.type === 'object' || p.type === 'array') {
                        return `
                            <div class="form-group">
                                <label class="form-label">${p.name}${p.required ? ' *' : ''}</label>
                                <textarea class="form-textarea" name="${p.name}" placeholder='${p.type === 'array' ? '[]' : '{}'}' ${p.required ? 'required' : ''}></textarea>
                            </div>
                        `;
                    } else {
                        return `
                            <div class="form-group">
                                <label class="form-label">${p.name}${p.required ? ' *' : ''}</label>
                                <input type="text" class="form-input" name="${p.name}" placeholder="${p.type}" ${p.required ? 'required' : ''}>
                            </div>
                        `;
                    }
                }).join('');
            }

            const content = `
                ${breadcrumbs}
                <div class="endpoint-card">
                    <div class="endpoint-header">
                        <span class="endpoint-method ${methodClass}">${endpoint.method}</span>
                        <span class="endpoint-path">${endpoint.path}</span>
                    </div>
                    <div class="endpoint-body">
                        <div class="tags-container">
                            <span class="tag tag-category">${endpoint.category}</span>
                            ${endpoint.cost ? `<span class="tag tag-cost">Cost: ${endpoint.cost}</span>` : ''}
                        </div>

                        <div class="section-title">Description</div>
                        <p class="description">${endpoint.description}</p>

                        ${parametersHtml}

                        <div class="section-title">Response</div>
                        <div class="code-container">
                            <div class="code-header">
                                <span class="code-label">Response Schema (${endpoint.response.status})</span>
                                <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                            </div>
                            <pre class="code-block"><code class="language-json">${endpoint.response.schema}</code></pre>
                        </div>

                        <div class="section-title">Example Request</div>
                        <div class="code-container">
                            <div class="code-header">
                                <span class="code-label">cURL</span>
                                <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                            </div>
                            <pre class="code-block"><code class="language-bash">${endpoint.example}</code></pre>
                        </div>

                        <div class="try-section">
                            <div class="try-header">
                                <span class="try-title">Try it out</span>
                                <button class="try-toggle" onclick="toggleTryItOut(this)">Execute</button>
                            </div>
                            <div class="try-form" id="tryForm-${endpointKey}">
                                <form onsubmit="executeRequest(event, '${endpointKey}')">
                                    <div class="form-group">
                                        <label class="form-label">API Key</label>
                                        <input type="text" class="form-input" name="api_key" placeholder="Bearer token" required>
                                    </div>
                                    ${tryFormHtml}
                                    <button type="submit" class="execute-btn">Send Request</button>
                                </form>
                                <div class="response-container" id="response-${endpointKey}">
                                    <div class="response-header">
                                        <span class="status-badge" id="status-${endpointKey}"></span>
                                    </div>
                                    <div class="code-container">
                                        <div class="code-header">
                                            <span class="code-label">Response</span>
                                            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                                        </div>
                                        <pre class="code-block"><code class="language-json" id="response-body-${endpointKey}"></code></pre>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;

            document.getElementById('endpointContent').innerHTML = content;
            document.getElementById('contentArea').scrollTop = 0;

            // Highlight code
            document.querySelectorAll('pre code').forEach((block) => {
                hljs.highlightElement(block);
            });

            // Initialize Lucide icons
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            }
        }

        // Toggle Try It Out form
        function toggleTryItOut(button) {
            const form = button.parentElement.nextElementSibling;
            form.classList.toggle('active');
            button.textContent = form.classList.contains('active') ? 'Hide' : 'Execute';
        }

        // Execute API request
        async function executeRequest(event, endpointKey) {
            event.preventDefault();

            const endpoint = apiData.endpoints[endpointKey];
            const form = event.target;
            const formData = new FormData(form);
            const apiKey = formData.get('api_key');

            // Build request body
            const body = {};
            for (let [key, value] of formData.entries()) {
                if (key === 'api_key') continue;

                // Try to parse JSON for object/array fields
                try {
                    body[key] = JSON.parse(value);
                } catch {
                    body[key] = value;
                }
            }

            // Show loading
            const responseContainer = document.getElementById(`response-${endpointKey}`);
            const statusBadge = document.getElementById(`status-${endpointKey}`);
            const responseBody = document.getElementById(`response-body-${endpointKey}`);

            responseContainer.classList.add('active');
            statusBadge.className = 'status-badge';
            statusBadge.textContent = 'Loading...';
            responseBody.textContent = 'Executing request...';

            try {
                // Use base URL from environment or default
                const baseUrl = 'http://localhost:3000';
                const url = `${baseUrl}${endpoint.path}`;

                const response = await fetch(url, {
                    method: endpoint.method,
                    headers: {
                        'Authorization': `Bearer ${apiKey}`,
                        'Content-Type': 'application/json'
                    },
                    body: endpoint.method !== 'GET' ? JSON.stringify(body) : undefined
                });

                const data = await response.json();

                statusBadge.className = `status-badge ${response.ok ? 'status-success' : 'status-error'}`;
                statusBadge.textContent = `${response.status} ${response.statusText}`;
                responseBody.textContent = JSON.stringify(data, null, 2);

                hljs.highlightElement(responseBody);
            } catch (error) {
                statusBadge.className = 'status-badge status-error';
                statusBadge.textContent = 'Error';
                responseBody.textContent = JSON.stringify({ error: error.message }, null, 2);
            }
        }

        // Copy code functionality
        function copyCode(button) {
            const codeBlock = button.closest('.code-container').querySelector('.code-block');
            const text = codeBlock.textContent;

            navigator.clipboard.writeText(text).then(() => {
                const originalText = button.textContent;
                button.textContent = 'Copied!';
                setTimeout(() => {
                    button.textContent = originalText;
                }, 2000);
            });
        }

        // Search functionality
        document.getElementById('globalSearch').addEventListener('input', function(e) {
            const searchTerm = e.target.value.toLowerCase();
            document.querySelectorAll('.sidebar-item').forEach(item => {
                const text = item.textContent.toLowerCase();
                item.style.display = text.includes(searchTerm) ? 'flex' : 'none';
            });
        });

        // Initialize on load
        document.addEventListener('DOMContentLoaded', () => {
            initSidebar();

            // Initialize Lucide icons
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            }
        });
    </script>
</body>
</html>
