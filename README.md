# SecondLayer - Legal Documents Analysis Platform

–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —é—Ä–∏–¥–∏—á–µ—Å–∫–∏–º–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏ –∏–∑ Zakononline —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º MCP (Model Context Protocol) –∏ –≤–µ–±-–∞–¥–º–∏–Ω–∫–æ–π.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
SecondLayer/
‚îú‚îÄ‚îÄ mcp_backend/        # MCP —Å–µ—Ä–≤–µ—Ä –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏
‚îú‚îÄ‚îÄ frontend/           # –í–µ–±-–∞–¥–º–∏–Ω–∫–∞ (React + Refine + Ant Design)
‚îú‚îÄ‚îÄ .env                # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–Ω–µ –≤ git)
‚îî‚îÄ‚îÄ package.json        # Root package.json
```

## –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 1. MCP Backend (`mcp_backend/`)

Model Context Protocol —Å–µ—Ä–≤–µ—Ä –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—â–∏–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è:
- –ü–æ–∏—Å–∫–∞ —Å—É–¥–µ–±–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π
- –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞
- –†–∞–±–æ—Ç—ã —Å —é—Ä–∏–¥–∏—á–µ—Å–∫–∏–º–∏ –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º–∏
- –í–∞–ª–∏–¥–∞—Ü–∏–∏ —Ü–∏—Ç–∞—Ç

**–ó–∞–ø—É—Å–∫:**
```bash
cd mcp_backend
npm install
npm run dev:http    # HTTP —Ä–µ–∂–∏–º –Ω–∞ –ø–æ—Ä—Ç—É 3000
```

–ü–æ–¥—Ä–æ–±–Ω–µ–µ: [mcp_backend/README.md](mcp_backend/README.md)

### 2. Frontend Admin Panel (`frontend/`)

–°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏.

**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:**
- React 18
- Refine - —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è –∞–¥–º–∏–Ω–æ–∫
- Ant Design - UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- Lucide React - –∏–∫–æ–Ω–∫–∏
- Vite - —Å–±–æ—Ä–∫–∞

**–ó–∞–ø—É—Å–∫:**
```bash
cd frontend
npm install
npm run dev         # –ó–∞–ø—É—Å–∫ –Ω–∞ –ø–æ—Ä—Ç—É 5173
```

–ü–æ–¥—Ä–æ–±–Ω–µ–µ: [frontend/README.md](frontend/README.md)

## üí∞ –ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å —Å—Ç–æ–∏–º–æ—Å—Ç–∏

SecondLayer –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç **–ø–æ–ª–Ω—É—é –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å –∑–∞—Ç—Ä–∞—Ç** –Ω–∞ –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏:

- ‚úÖ **–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –≤ –æ–ø–∏—Å–∞–Ω–∏–∏ –∫–∞–∂–¥–æ–≥–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç –ø—Ä–∏–º–µ—Ä–Ω—É—é —Å—Ç–æ–∏–º–æ—Å—Ç—å –î–û –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- ‚úÖ **–§–∞–∫—Ç–∏—á–µ—Å–∫–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –≤ –æ—Ç–≤–µ—Ç–µ** - —Ç–æ—á–Ω–∞—è breakdown –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- ‚úÖ **–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö** - –≤—Å–µ –∑–∞—Ç—Ä–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- ‚úÖ **–ü—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–µ —Ç–∞—Ä–∏—Ñ—ã** - —Å—Ç–æ–∏–º–æ—Å—Ç—å —Å–Ω–∏–∂–∞–µ—Ç—Å—è —Å —Ä–æ—Å—Ç–æ–º –æ–±—ä–µ–º–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

**–ü—Ä–∏–º–µ—Ä—ã —Å—Ç–æ–∏–º–æ—Å—Ç–∏:**
- `search_legal_precedents`: $0.03-$0.10 USD
- `get_legal_advice`: $0.10-$0.30 USD (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç reasoning_budget)
- `extract_document_sections`: $0.005-$0.05 USD

–ü–æ–¥—Ä–æ–±–Ω–µ–µ: **[docs/COST_TRANSPARENCY.md](docs/COST_TRANSPARENCY.md)**

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
# MCP Backend
cd mcp_backend
npm install

# Frontend
cd ../frontend
npm install
```

### 2. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–°–æ–∑–¥–∞–π—Ç–µ `.env` —Ñ–∞–π–ª –≤ –∫–æ—Ä–Ω–µ –∏ –≤ `mcp_backend/`:

```bash
# Root .env
SECONDARY_LAYER_KEYS=test-key-123,dev-key-456

# mcp_backend/.env
DATABASE_URL=postgresql://user:password@localhost:5432/secondlayer
REDIS_HOST=localhost
QDRANT_URL=http://localhost:6333
OPENAI_API_KEY=your-key
ZAKONONLINE_API_TOKEN=your-token
SECONDARY_LAYER_KEYS=test-key-123,dev-key-456
```

Frontend (—É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ `frontend/.env`):
```bash
VITE_API_URL=http://localhost:3000/api
VITE_SECONDARY_LAYER_KEY=test-key-123
```

### 3. –ó–∞–ø—É—Å–∫

**–¢–µ—Ä–º–∏–Ω–∞–ª 1 - Backend:**
```bash
cd mcp_backend
npm run dev:http
```

**–¢–µ—Ä–º–∏–Ω–∞–ª 2 - Frontend:**
```bash
cd frontend  
npm run dev
```

–û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:5173

## Docker

–ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ docker-compose:

```bash
cd mcp_backend
docker-compose up -d
```

## API

### MCP Mode
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ MCP SDK –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É.

### HTTP Mode
- `GET /health` - Health check
- `POST /api/search` - –ü–æ–∏—Å–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- `POST /api/analyze` - –ê–Ω–∞–ª–∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞
- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è: `Authorization: Bearer <SECONDARY_LAYER_KEY>`

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
mcp_backend/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ adapters/       # API –∞–¥–∞–ø—Ç–µ—Ä—ã
‚îÇ   ‚îú‚îÄ‚îÄ api/            # MCP endpoints
‚îÇ   ‚îú‚îÄ‚îÄ database/       # –ë–î
‚îÇ   ‚îú‚îÄ‚îÄ services/       # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ index.ts        # MCP entry point
‚îÇ   ‚îî‚îÄ‚îÄ http-server.ts  # HTTP entry point

frontend/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ pages/          # –°—Ç—Ä–∞–Ω–∏—Ü—ã –∞–¥–º–∏–Ω–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ providers/      # Data providers
‚îÇ   ‚îú‚îÄ‚îÄ styles/         # –¢–µ–º—ã –∏ —Å—Ç–∏–ª–∏
‚îÇ   ‚îî‚îÄ‚îÄ App.tsx
```

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

**Backend:**
- TypeScript
- Model Context Protocol SDK
- PostgreSQL + Redis + Qdrant
- OpenAI API
- Express (HTTP mode)

**Frontend:**
- React + TypeScript
- Refine framework
- Ant Design 5
- Lucide icons
- Vite

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –û—Å–Ω–æ–≤–Ω–æ–µ
- [MCP Backend README](mcp_backend/README.md)
- [Frontend README](frontend/README.md)
- [Frontend Setup Guide](frontend/SETUP.md)
- [API Keys](KEYS.md)
- [Quick Start](START.md)

### MCP Protocol
- [MCP Documentation](docs/mcp/00-README.md) - –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ Model Context Protocol
- [MCP Introduction](docs/mcp/01-introduction.md) - –í–≤–µ–¥–µ–Ω–∏–µ –≤ MCP

### –°—Ç–æ–∏–º–æ—Å—Ç—å –∏ –±–∏–ª–ª–∏–Ω–≥
- [Cost Transparency](docs/COST_TRANSPARENCY.md) - –ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –æ–ø–µ—Ä–∞—Ü–∏–π
- [Pricing](pricing.json) - –î–µ—Ç–∞–ª—å–Ω—ã–µ —Ç–∞—Ä–∏—Ñ—ã –Ω–∞ API

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT

## –ê–≤—Ç–æ—Ä—ã

SecondLayer Team
