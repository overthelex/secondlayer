# SecondLayer MCP Tools - –ó–≤—ñ—Ç –∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

**–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä:** `secondlayer-app`
**–°—Ç–∞—Ç—É—Å:** ‚úÖ Running (8 hours uptime)
**–ü–æ—Ä—Ç:** 3000 (HTTP API)
**–î–∞—Ç–∞:** 2026-01-18

---

## üìä –ó–∞–≥–∞–ª—å–Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

- **–í—Å—å–æ–≥–æ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ñ–≤:** 10
- **–°–µ—Ä–≤–µ—Ä:** secondlayer-mcp-http
- **API –≤–µ—Ä—Å—ñ—è:** 1.0.0
- **–ü—Ä–æ—Ç–æ–∫–æ–ª:** MCP (Model Context Protocol)

---

## üîß –°–ø–∏—Å–æ–∫ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ñ–≤

### 1. search_legal_precedents
**–ü–æ—à—É–∫ —é—Ä–∏–¥–∏—á–Ω–∏—Ö –ø—Ä–µ—Ü–µ–¥–µ–Ω—Ç—ñ–≤ –∑ —Å–µ–º–∞–Ω—Ç–∏—á–Ω–∏–º –∞–Ω–∞–ª—ñ–∑–æ–º**

- **–í–∞—Ä—Ç—ñ—Å—Ç—å:** $0.03-$0.10 USD
- **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏:** OpenAI API (embeddings) + ZakonOnline API + SecondLayer MCP
- **–ü–∞—Ä–∞–º–µ—Ç—Ä–∏:**
  - `query` (string) - –ø–æ—à—É–∫–æ–≤–∏–π –∑–∞–ø–∏—Ç
  - `domain` (string) - –¥–æ–º–µ–Ω –ø–æ—à—É–∫—É
  - `time_range` (object) - —á–∞—Å–æ–≤–∏–π –¥—ñ–∞–ø–∞–∑–æ–Ω
  - `limit` (number) - –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤
  - `offset` (number) - –∑–º—ñ—â–µ–Ω–Ω—è –¥–ª—è –ø–∞–≥—ñ–Ω–∞—Ü—ñ—ó
  - `count_all` (boolean) - –ø—ñ–¥—Ä–∞—Ö—É–Ω–æ–∫ –≤—Å—ñ—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤
  - `sections` (array) - —Å–µ–∫—Ü—ñ—ó –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤

**–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:**
```javascript
{
  "query": "–Ω–µ–∑–∞–∫–æ–Ω–Ω–∞ –º–æ–±—ñ–ª—ñ–∑–∞—Ü—ñ—è 2023",
  "limit": 10,
  "sections": ["FACTS", "REASONING"]
}
```

---

### 2. analyze_case_pattern
**–ê–Ω–∞–ª—ñ–∑ –ø–∞—Ç—Ç–µ—Ä–Ω—ñ–≤ —Å—É–¥–æ–≤–æ—ó –ø—Ä–∞–∫—Ç–∏–∫–∏**

- **–í–∞—Ä—Ç—ñ—Å—Ç—å:** $0.02-$0.08 USD
- **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏:** OpenAI API + PostgreSQL
- **–ü–∞—Ä–∞–º–µ—Ç—Ä–∏:**
  - `intent` (string) - —Ç–µ–º–∞ –∞–±–æ —ñ–Ω—Ç–µ–Ω—Ç
  - `case_ids` (array) - ID —Å–ø—Ä–∞–≤ –¥–ª—è –∞–Ω–∞–ª—ñ–∑—É

**–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:**
```javascript
{
  "intent": "—É—Ö–∏–ª–µ–Ω–Ω—è –≤—ñ–¥ –≤—ñ–π—Å—å–∫–æ–≤–æ—ó —Å–ª—É–∂–±–∏",
  "case_ids": ["110679112", "110441965"]
}
```

---

### 3. get_similar_reasoning
**–ü–æ—à—É–∫ —Å—Ö–æ–∂–∏—Ö —Å—É–¥–æ–≤–∏—Ö –æ–±“ë—Ä—É–Ω—Ç—É–≤–∞–Ω—å**

- **–í–∞—Ä—Ç—ñ—Å—Ç—å:** $0.01-$0.03 USD
- **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏:** OpenAI Embeddings + Qdrant (–≤–µ–∫—Ç–æ—Ä–Ω–∞ –ë–î)
- **–ü–∞—Ä–∞–º–µ—Ç—Ä–∏:**
  - `query` (string) - —Ç–µ–∫—Å—Ç –æ–±“ë—Ä—É–Ω—Ç—É–≤–∞–Ω–Ω—è
  - `section_type` (string) - —Ç–∏–ø —Å–µ–∫—Ü—ñ—ó
  - `limit` (number) - –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤

**–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:**
```javascript
{
  "query": "—Å—É–¥–æ–≤–∏–π —Ä–æ–∑–≥–ª—è–¥ –ø–∏—Ç–∞–Ω–Ω—è –º–æ–±—ñ–ª—ñ–∑–∞—Ü—ñ—ó",
  "section_type": "REASONING",
  "limit": 5
}
```

---

### 4. extract_document_sections
**–í–∏—Ç—è–≥—É–≤–∞–Ω–Ω—è —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω–∏—Ö —Å–µ–∫—Ü—ñ–π –∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞**

- **–í–∞—Ä—Ç—ñ—Å—Ç—å:** $0.005-$0.05 USD
- **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏:** HTML Parser + OpenAI (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)
- **–ü–∞—Ä–∞–º–µ—Ç—Ä–∏:**
  - `doc_id` (string) - ID –¥–æ–∫—É–º–µ–Ω—Ç–∞ –∑ Zakononline
  - `document_id` (string) - –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–µ —ñ–º'—è
  - `text` (string) - –ø–æ–≤–Ω–∏–π —Ç–µ–∫—Å—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞
  - `use_llm` (boolean) - –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ LLM –¥–ª—è –µ–∫—Å—Ç—Ä–∞–∫—Ü—ñ—ó

**–°–µ–∫—Ü—ñ—ó:** FACTS, REASONING, DECISION, LAW_REFERENCES, PROCEDURAL

**–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:**
```javascript
{
  "doc_id": "110679112",
  "use_llm": true
}
```

---

### 5. count_cases_by_party
**–ü—ñ–¥—Ä–∞—Ö—É–Ω–æ–∫ —Å–ø—Ä–∞–≤ –∑–∞ —Å—Ç–æ—Ä–æ–Ω–æ—é**

- **–í–∞—Ä—Ç—ñ—Å—Ç—å:** ~$0.007 –∑–∞ –∫–æ–∂–Ω—É —Å—Ç–æ—Ä—ñ–Ω–∫—É (1000 —Å–ø—Ä–∞–≤)
- **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏:** ZakonOnline API (–ø–∞–≥—ñ–Ω–∞—Ü—ñ—è)
- **–ü–∞—Ä–∞–º–µ—Ç—Ä–∏:**
  - `party_name` (string) - –Ω–∞–∑–≤–∞ –∫–æ–º–ø–∞–Ω—ñ—ó –∞–±–æ –ü–Ü–ë
  - `party_type` (string) - plaintiff/defendant/any
  - `date_from` (string) - –¥–∞—Ç–∞ –ø–æ—á–∞—Ç–∫—É (YYYY-MM-DD)
  - `date_to` (string) - –¥–∞—Ç–∞ –∫—ñ–Ω—Ü—è (YYYY-MM-DD)
  - `return_cases` (boolean) - –ø–æ–≤–µ—Ä–Ω—É—Ç–∏ —Å–ø–∏—Å–æ–∫ —Å–ø—Ä–∞–≤
  - `max_cases_to_return` (number) - –º–∞–∫—Å. –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Å–ø—Ä–∞–≤

**–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:**
```javascript
{
  "party_name": "–§—ñ–Ω–∞–Ω—Å–æ–≤–∞ –∫–æ–º–ø–∞–Ω—ñ—è –§–∞–Ω–≥–∞—Ä–∞–Ω—Ç –≥—Ä—É–ø",
  "party_type": "defendant",
  "date_from": "2023-01-01",
  "date_to": "2023-12-31",
  "return_cases": true
}
```

---

### 6. find_relevant_law_articles
**–ü–æ—à—É–∫ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–∏—Ö —Å—Ç–∞—Ç–µ–π –∑–∞–∫–æ–Ω—ñ–≤**

- **–í–∞—Ä—Ç—ñ—Å—Ç—å:** $0.01-$0.02 USD
- **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏:** PostgreSQL (legal patterns)
- **–ü–∞—Ä–∞–º–µ—Ç—Ä–∏:**
  - `intent` (string) - —Ç–µ–º–∞
  - `limit` (number) - –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤

**–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:**
```javascript
{
  "intent": "–º–æ–±—ñ–ª—ñ–∑–∞—Ü—ñ—è",
  "limit": 10
}
```

---

### 7. check_precedent_status
**–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å—É –ø—Ä–µ—Ü–µ–¥–µ–Ω—Ç—É**

- **–í–∞—Ä—Ç—ñ—Å—Ç—å:** $0.005-$0.015 USD
- **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏:** PostgreSQL
- **–ü–∞—Ä–∞–º–µ—Ç—Ä–∏:**
  - `case_id` (string) - ID —Å–ø—Ä–∞–≤–∏

**–°—Ç–∞—Ç—É—Å–∏:** valid, overruled, questioned, pending

**–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:**
```javascript
{
  "case_id": "756/655/23"
}
```

---

### 8. load_full_texts
**–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –ø–æ–≤–Ω–∏—Ö —Ç–µ–∫—Å—Ç—ñ–≤ —Å—É–¥–æ–≤–∏—Ö —Ä—ñ—à–µ–Ω—å**

- **–í–∞—Ä—Ç—ñ—Å—Ç—å:** ~$0.007 –∑–∞ –¥–æ–∫—É–º–µ–Ω—Ç
- **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏:** ZakonOnline web scraping + PostgreSQL + Redis cache
- **–ü–∞—Ä–∞–º–µ—Ç—Ä–∏:**
  - `doc_ids` (array) - –º–∞—Å–∏–≤ ID –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤
  - `max_docs` (number) - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å
  - `batch_size` (number) - —Ä–æ–∑–º—ñ—Ä –±–∞—Ç—á—É (default: 100)

**–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:**
```javascript
{
  "doc_ids": [110679112, 110441965, 110234567],
  "max_docs": 100,
  "batch_size": 50
}
```

---

### 9. get_citation_graph
**–ü–æ–±—É–¥–æ–≤–∞ –≥—Ä–∞—Ñ—É —Ü–∏—Ç—É–≤–∞–Ω—å**

- **–í–∞—Ä—Ç—ñ—Å—Ç—å:** $0.005-$0.02 USD
- **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏:** PostgreSQL
- **–ü–∞—Ä–∞–º–µ—Ç—Ä–∏:**
  - `case_id` (string) - ID —Å–ø—Ä–∞–≤–∏
  - `depth` (number) - –≥–ª–∏–±–∏–Ω–∞ –≥—Ä–∞—Ñ—É

**–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:**
```javascript
{
  "case_id": "756/655/23",
  "depth": 2
}
```

---

### 10. get_legal_advice ‚≠ê (–ì–æ–ª–æ–≤–Ω–∏–π —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç)
**–ö–æ–º–ø–ª–µ–∫—Å–Ω–∏–π —é—Ä–∏–¥–∏—á–Ω–∏–π –∞–Ω–∞–ª—ñ–∑ –∑ –ø–µ—Ä–µ–≤—ñ—Ä–∫–æ—é –≥–∞–ª—é—Ü–∏–Ω–∞—Ü—ñ–π**

- **–í–∞—Ä—Ç—ñ—Å—Ç—å:** $0.10-$0.30 USD (–∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ reasoning_budget)
  - `quick`: ~$0.10 (–±–∞–∑–æ–≤–∏–π –∞–Ω–∞–ª—ñ–∑)
  - `standard`: ~$0.15-$0.20 ‚≠ê —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ
  - `deep`: ~$0.25-$0.30 (–≥–ª–∏–±–æ–∫–∏–π –∞–Ω–∞–ª—ñ–∑)

- **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏:** –ú–Ω–æ–∂–∏–Ω–Ω—ñ –≤–∏–∫–ª–∏–∫–∏ OpenAI API + ZakonOnline API + SecondLayer MCP + Hallucination Guard
- **–ü–∞—Ä–∞–º–µ—Ç—Ä–∏:**
  - `query` (string) - –ø–∏—Ç–∞–Ω–Ω—è
  - `reasoning_budget` (string) - quick/standard/deep

**–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:**
```javascript
{
  "query": "–ß–∏ –º–æ–∂–Ω–∞ –æ—Å–∫–∞—Ä–∂–∏—Ç–∏ –ø–æ–≤—ñ—Å—Ç–∫—É –¢–¶–ö, —è–∫—â–æ –≤–æ–Ω–∞ –≤—Ä—É—á–µ–Ω–∞ –∑ –ø–æ—Ä—É—à–µ–Ω–Ω—è–º –ø—Ä–æ—Ü–µ–¥—É—Ä–∏?",
  "reasoning_budget": "standard"
}
```

---

## üí∞ –ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è –≤–∞—Ä—Ç–æ—Å—Ç—ñ

| –Ü–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç | –ú—ñ–Ω. –≤–∞—Ä—Ç—ñ—Å—Ç—å | –ú–∞–∫—Å. –≤–∞—Ä—Ç—ñ—Å—Ç—å | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è |
|-----------|---------------|----------------|--------------|
| **check_precedent_status** | $0.005 | $0.015 | –ù–∞–π–¥–µ—à–µ–≤—à–∏–π |
| **extract_document_sections** | $0.005 | $0.05 | –ó–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ use_llm |
| **find_relevant_law_articles** | $0.01 | $0.02 | –î–µ—à–µ–≤–æ |
| **get_similar_reasoning** | $0.01 | $0.03 | –î–µ—à–µ–≤–æ |
| **get_citation_graph** | $0.005 | $0.02 | –î–µ—à–µ–≤–æ |
| **analyze_case_pattern** | $0.02 | $0.08 | –°–µ—Ä–µ–¥–Ω—î |
| **search_legal_precedents** | $0.03 | $0.10 | –°–µ—Ä–µ–¥–Ω—î |
| **load_full_texts** | $0.007/doc | –ó–∞–ª–µ–∂–∏—Ç—å | –ó–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—é |
| **count_cases_by_party** | $0.007/page | –ó–∞–ª–µ–∂–∏—Ç—å | –ó–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—é |
| **get_legal_advice** | $0.10 | $0.30 | –ù–∞–π–¥–æ—Ä–æ–∂—á–∏–π ‚≠ê |

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω—ñ –∫–æ–º–±—ñ–Ω–∞—Ü—ñ—ó

### –î–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è —Å–ø—Ä–∞–≤–∏
1. `search_legal_precedents` - –∑–Ω–∞–π—Ç–∏ —Å—Ö–æ–∂—ñ —Å–ø—Ä–∞–≤–∏
2. `load_full_texts` - –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –ø–æ–≤–Ω—ñ —Ç–µ–∫—Å—Ç–∏
3. `extract_document_sections` - –≤–∏—Ç—è–≥—Ç–∏ —Å–µ–∫—Ü—ñ—ó
4. `analyze_case_pattern` - –ø—Ä–æ–∞–Ω–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –ø–∞—Ç—Ç–µ—Ä–Ω–∏

**–ó–∞–≥–∞–ª—å–Ω–∞ –≤–∞—Ä—Ç—ñ—Å—Ç—å:** ~$0.10-$0.25

### –ü–æ–≤–Ω–∞ —é—Ä–∏–¥–∏—á–Ω–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü—ñ—è
1. `get_legal_advice` (standard) - –æ—Ç—Ä–∏–º–∞—Ç–∏ –∞–Ω–∞–ª—ñ–∑
2. `get_citation_graph` - –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∑–≤'—è–∑–∫–∏
3. `check_precedent_status` - –≤–∞–ª—ñ–¥—É–≤–∞—Ç–∏ –ø—Ä–µ—Ü–µ–¥–µ–Ω—Ç–∏

**–ó–∞–≥–∞–ª—å–Ω–∞ –≤–∞—Ä—Ç—ñ—Å—Ç—å:** ~$0.15-$0.35

### –°—Ç–∞—Ç–∏—Å—Ç–∏—á–Ω–∏–π –∞–Ω–∞–ª—ñ–∑
1. `count_cases_by_party` - –ø—ñ–¥—Ä–∞—Ö—É–≤–∞—Ç–∏ —Å–ø—Ä–∞–≤–∏
2. `find_relevant_law_articles` - –∑–Ω–∞–π—Ç–∏ —Å—Ç–∞—Ç—Ç—ñ
3. `analyze_case_pattern` - –∞–Ω–∞–ª—ñ–∑ –ø–∞—Ç—Ç–µ—Ä–Ω—ñ–≤

**–ó–∞–≥–∞–ª—å–Ω–∞ –≤–∞—Ä—Ç—ñ—Å—Ç—å:** –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ –∫—ñ–ª—å–∫–æ—Å—Ç—ñ —Å–ø—Ä–∞–≤

---

## üìÅ –ó–±–µ—Ä–µ–∂–µ–Ω—ñ —Ñ–∞–π–ª–∏

1. **JSON Schema:** `docs/MCP_TOOLS_SCHEMA.json`
2. **Markdown List:** `docs/MCP_TOOLS_LIST.md`
3. **Summary (—Ü–µ–π —Ñ–∞–π–ª):** `docs/MCP_TOOLS_SUMMARY.md`

---

## üîó API Endpoints

**Base URL:** `http://localhost:3000`

- `GET /health` - Health check (–±–µ–∑ auth)
- `GET /api/tools` - –°–ø–∏—Å–æ–∫ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ñ–≤ (–ø–æ—Ç—Ä—ñ–±–µ–Ω Bearer token)
- `POST /api/tools/:toolName` - –í–∏–∫–æ–Ω–∞—Ç–∏ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç
- `POST /api/tools/:toolName/stream` - SSE streaming

**–ü—Ä–∏–∫–ª–∞–¥:**
```bash
curl -H "Authorization: Bearer test-key-123" \
     -H "Content-Type: application/json" \
     -X POST http://localhost:3000/api/tools/search_legal_precedents \
     -d '{"query": "–º–æ–±—ñ–ª—ñ–∑–∞—Ü—ñ—è", "limit": 5}'
```

---

## üìö –î–æ–¥–∞—Ç–∫–æ–≤–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

- **–Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ–π–Ω–∏–π –≥–∞–π–¥:** `docs/INTEGRATION_GUIDE_WEB.html`
- **–®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç:** `docs/QUICK_START.md`
- **Client Integration:** `mcp_backend/docs/CLIENT_INTEGRATION.md`
- **SSE Streaming:** `mcp_backend/docs/SSE_STREAMING.md`

---

**–°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:** ‚úÖ Healthy
**–°–µ—Ä–≤—ñ—Å–∏:** PostgreSQL, Qdrant, Redis, App - –≤—Å—ñ –ø—Ä–∞—Ü—é—é—Ç—å
**–û–Ω–æ–≤–ª–µ–Ω–æ:** 2026-01-18
