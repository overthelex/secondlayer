# –ê–Ω–∞–ª–∏–∑ —Å–∏—Å—Ç–µ–º—ã –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Å—Ç–æ–∏–º–æ—Å—Ç–∏ —Ç–æ–∫–µ–Ω–æ–≤

**–î–∞—Ç–∞ –∞–Ω–∞–ª–∏–∑–∞:** 2026-01-18
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

## üìä –†–µ–∑—é–º–µ

–°–∏—Å—Ç–µ–º–∞ SecondLayer **—Ç–æ—á–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –º–æ–¥–µ–ª–µ–π** –∏ —Å—á–∏—Ç–∞–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç—å –¥–ª—è –∫–∞–∂–¥–æ–π –º–æ–¥–µ–ª–∏ –æ—Ç–¥–µ–ª—å–Ω–æ. –ö–∞–∂–¥—ã–π –≤—ã–∑–æ–≤ API –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö —Å –ø–æ–ª–Ω–æ–π –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–µ–π.

---

## ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ

### 1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –≤—ã–∑–æ–≤–æ–≤

**–§–∞–π–ª:** `mcp_backend/src/utils/openai-client.ts:108-139`

```typescript
private async trackOpenAIUsage(response: any): Promise<void> {
  const context = requestContext.getStore();

  // –ò–∑–≤–ª–µ–∫–∞–µ–º —Ä–µ–∞–ª—å–Ω—É—é –º–æ–¥–µ–ª—å –∏–∑ –æ—Ç–≤–µ—Ç–∞ API
  const model = response.model;  // ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –º–æ–¥–µ–ª—å!

  // –°—á–∏—Ç–∞–µ–º —Ç–æ—á–Ω—É—é —Å—Ç–æ–∏–º–æ—Å—Ç—å –¥–ª—è —ç—Ç–æ–π –º–æ–¥–µ–ª–∏
  const costUsd = ModelSelector.estimateCostAccurate(
    response.model,           // ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ä–µ–∞–ª—å–Ω–∞—è –º–æ–¥–µ–ª—å
    promptTokens,             // ‚úÖ –¢–æ—á–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã –∏–∑ API
    completionTokens          // ‚úÖ –¢–æ—á–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã –∏–∑ API
  );

  // –ó–∞–ø–∏—Å—ã–≤–∞–µ–º –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
  await this.costTracker.recordOpenAICall({
    requestId: context.requestId,
    model: response.model,              // ‚úÖ –ú–û–î–ï–õ–¨ –°–û–•–†–ê–ù–Ø–ï–¢–°–Ø
    promptTokens: promptTokens,         // ‚úÖ INPUT –¢–û–ö–ï–ù–´
    completionTokens: completionTokens, // ‚úÖ OUTPUT –¢–û–ö–ï–ù–´
    totalTokens: totalTokens,
    costUsd: costUsd,                   // ‚úÖ –¢–û–ß–ù–ê–Ø –°–¢–û–ò–ú–û–°–¢–¨
    task: context.task,
  });
}
```

### 2. –¢–æ—á–Ω—ã–π —Ä–∞—Å—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –ø–æ –º–æ–¥–µ–ª—è–º

**–§–∞–π–ª:** `mcp_backend/src/utils/model-selector.ts:75-116`

```typescript
static estimateCostAccurate(
  model: string,
  promptTokens: number,
  completionTokens: number
): number {
  const costPer1M: Record<string, { input: number; output: number }> = {
    // OpenAI
    'gpt-4o': { input: 2.50, output: 10.00 },
    'gpt-4o-mini': { input: 0.15, output: 0.60 },

    // Claude (–û–ë–ù–û–í–õ–ï–ù–û 2026-01-18!)
    'claude-opus-4.5': { input: 5.00, output: 25.00 },
    'claude-sonnet-4.5': { input: 3.00, output: 15.00 },
    'claude-haiku-4.5': { input: 1.00, output: 5.00 },
    // ... –∏ –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –º–æ–¥–µ–ª–∏
  };

  // –¢–æ—á–Ω—ã–π —Ä–∞—Å—á–µ—Ç
  const inputCost = (promptTokens * pricing.input) / 1_000_000;
  const outputCost = (completionTokens * pricing.output) / 1_000_000;

  return inputCost + outputCost;
}
```

### 3. –î–µ—Ç–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

**–¢–∞–±–ª–∏—Ü–∞:** `cost_tracking` ‚Üí –ø–æ–ª–µ `openai_calls` (JSONB)

–ö–∞–∂–¥—ã–π –≤—ã–∑–æ–≤ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç –≤ –º–∞—Å—Å–∏–≤–µ:

```json
{
  "openai_calls": [
    {
      "model": "gpt-4o-mini",
      "prompt_tokens": 1234,
      "completion_tokens": 567,
      "total_tokens": 1801,
      "cost_usd": 0.000525,
      "task": "intent_classification",
      "timestamp": "2026-01-18T10:30:00.000Z"
    },
    {
      "model": "gpt-4o",
      "prompt_tokens": 3456,
      "completion_tokens": 1234,
      "total_tokens": 4690,
      "cost_usd": 0.020990,
      "task": "deep_analysis",
      "timestamp": "2026-01-18T10:31:15.000Z"
    },
    {
      "model": "claude-haiku-4.5",
      "prompt_tokens": 890,
      "completion_tokens": 234,
      "total_tokens": 1124,
      "cost_usd": 0.002060,
      "task": "quick_extraction",
      "timestamp": "2026-01-18T10:32:00.000Z"
    }
  ]
}
```

---

## üéØ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –∑–∞–ø—Ä–æ—Å–∞:

```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–µ–ª–∞–µ—Ç –∑–∞–ø—Ä–æ—Å
   ‚Üì
2. CostTracker.createTrackingRecord() —Å–æ–∑–¥–∞–µ—Ç –∑–∞–ø–∏—Å—å —Å requestId
   ‚Üì
3. OpenAIClientManager.executeWithRetry() –≤—ã–∑—ã–≤–∞–µ—Ç API
   ‚Üì
4. API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç response —Å:
   - response.model (–Ω–∞–ø—Ä–∏–º–µ—Ä, "gpt-4o-mini")
   - response.usage.prompt_tokens
   - response.usage.completion_tokens
   ‚Üì
5. trackOpenAIUsage() –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
   - –ë–µ—Ä–µ—Ç –†–ï–ê–õ–¨–ù–£–Æ –º–æ–¥–µ–ª—å –∏–∑ –æ—Ç–≤–µ—Ç–∞
   - –°—á–∏—Ç–∞–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç—å —á–µ—Ä–µ–∑ ModelSelector.estimateCostAccurate()
   - –ó–∞–ø–∏—Å—ã–≤–∞–µ—Ç –≤ –ë–î —á–µ—Ä–µ–∑ CostTracker.recordOpenAICall()
   ‚Üì
6. –í –ë–î —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –¥–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:
   - –ú–æ–¥–µ–ª—å (—Ç–æ—á–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –æ—Ç API)
   - –¢–æ–∫–µ–Ω—ã (input/output –æ—Ç–¥–µ–ª—å–Ω–æ)
   - –°—Ç–æ–∏–º–æ—Å—Ç—å (—Ä–∞—Å—Å—á–∏—Ç–∞–Ω–Ω–∞—è –¥–ª—è —ç—Ç–æ–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –º–æ–¥–µ–ª–∏)
   - –ó–∞–¥–∞—á–∞ (intent_classification, embedding, etc.)
   - Timestamp
```

---

## üìà –ü—Ä–∏–º–µ—Ä—ã —Ä–∞—Å—á–µ—Ç–∞ —Å—Ç–æ–∏–º–æ—Å—Ç–∏

### –ü—Ä–∏–º–µ—Ä 1: GPT-4o Mini (–¥–µ—à–µ–≤–∞—è –º–æ–¥–µ–ª—å)
```
–ó–∞–ø—Ä–æ—Å: "–ù–∞–π–¥–∏ –ø–æ—Ö–æ–∂–∏–µ –¥–µ–ª–∞"
–ú–æ–¥–µ–ª—å: gpt-4o-mini
Input: 500 —Ç–æ–∫–µ–Ω–æ–≤ √ó $0.15/1M = $0.000075
Output: 200 —Ç–æ–∫–µ–Ω–æ–≤ √ó $0.60/1M = $0.000120
–ò–¢–û–ì–û: $0.000195
```

### –ü—Ä–∏–º–µ—Ä 2: GPT-4o (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –º–æ–¥–µ–ª—å)
```
–ó–∞–ø—Ä–æ—Å: "–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π —ç—Ç–æ —Ä–µ—à–µ–Ω–∏–µ —Å—É–¥–∞"
–ú–æ–¥–µ–ª—å: gpt-4o
Input: 2000 —Ç–æ–∫–µ–Ω–æ–≤ √ó $2.50/1M = $0.005000
Output: 800 —Ç–æ–∫–µ–Ω–æ–≤ √ó $10.00/1M = $0.008000
–ò–¢–û–ì–û: $0.013000
```

### –ü—Ä–∏–º–µ—Ä 3: Claude Opus 4.5 (–¥–æ—Ä–æ–≥–∞—è –º–æ–¥–µ–ª—å)
```
–ó–∞–ø—Ä–æ—Å: "–ì–ª—É–±–æ–∫–∏–π —é—Ä–∏–¥–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ —Å –ø—Ä–µ—Ü–µ–¥–µ–Ω—Ç–∞–º–∏"
–ú–æ–¥–µ–ª—å: claude-opus-4.5
Input: 5000 —Ç–æ–∫–µ–Ω–æ–≤ √ó $5.00/1M = $0.025000
Output: 2000 —Ç–æ–∫–µ–Ω–æ–≤ √ó $25.00/1M = $0.050000
–ò–¢–û–ì–û: $0.075000
```

### –ü—Ä–∏–º–µ—Ä 4: –°–º–µ—à–∞–Ω–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –æ–¥–Ω–æ–º –∑–∞–ø—Ä–æ—Å–µ
```
Request ID: req_abc123

–í—ã–∑–æ–≤ 1: gpt-4o-mini (–∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–∞)
  - Input: 300 —Ç–æ–∫–µ–Ω–æ–≤ √ó $0.15 = $0.000045
  - Output: 50 —Ç–æ–∫–µ–Ω–æ–≤ √ó $0.60 = $0.000030
  - –°—Ç–æ–∏–º–æ—Å—Ç—å: $0.000075

–í—ã–∑–æ–≤ 2: text-embedding-ada-002 (–≤–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—è)
  - Input: 1500 —Ç–æ–∫–µ–Ω–æ–≤ √ó $0.10 = $0.000150
  - Output: 0 —Ç–æ–∫–µ–Ω–æ–≤
  - –°—Ç–æ–∏–º–æ—Å—Ç—å: $0.000150

–í—ã–∑–æ–≤ 3: gpt-4o (–∞–Ω–∞–ª–∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤)
  - Input: 4000 —Ç–æ–∫–µ–Ω–æ–≤ √ó $2.50 = $0.010000
  - Output: 1500 —Ç–æ–∫–µ–Ω–æ–≤ √ó $10.00 = $0.015000
  - –°—Ç–æ–∏–º–æ—Å—Ç—å: $0.025000

–ò–¢–û–ì–û OpenAI: $0.025225
–ò–¢–û–ì–û ZakonOnline: $0.014280 (2 –≤—ã–∑–æ–≤–∞)
–û–ë–©–ê–Ø –°–¢–û–ò–ú–û–°–¢–¨: $0.039505
```

---

## üîç –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–æ–∏–º–æ—Å—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞

### SQL –∑–∞–ø—Ä–æ—Å –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞:

```sql
SELECT
  request_id,
  tool_name,
  openai_total_tokens,
  openai_cost_usd,
  openai_calls,
  zakononline_cost_usd,
  total_cost_usd,
  created_at
FROM cost_tracking
WHERE request_id = 'req_abc123';
```

### –ê–Ω–∞–ª–∏–∑ –∫–∞–∫–∏–µ –º–æ–¥–µ–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å:

```sql
SELECT
  request_id,
  jsonb_array_elements(openai_calls) AS call_details
FROM cost_tracking
WHERE request_id = 'req_abc123';
```

### –†–µ–∑—É–ª—å—Ç–∞—Ç:
```json
{
  "model": "gpt-4o-mini",
  "prompt_tokens": 300,
  "completion_tokens": 50,
  "total_tokens": 350,
  "cost_usd": 0.000075,
  "task": "intent_classification",
  "timestamp": "2026-01-18T10:30:00.000Z"
}
{
  "model": "text-embedding-ada-002",
  "prompt_tokens": 1500,
  "completion_tokens": 0,
  "total_tokens": 1500,
  "cost_usd": 0.000150,
  "task": "embedding",
  "timestamp": "2026-01-18T10:30:05.000Z"
}
{
  "model": "gpt-4o",
  "prompt_tokens": 4000,
  "completion_tokens": 1500,
  "total_tokens": 5500,
  "cost_usd": 0.025000,
  "task": "deep_analysis",
  "timestamp": "2026-01-18T10:30:10.000Z"
}
```

### –ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –º–æ–¥–µ–ª—è–º:

```sql
SELECT
  call->>'model' AS model_name,
  COUNT(*) AS total_calls,
  SUM((call->>'prompt_tokens')::int) AS total_prompt_tokens,
  SUM((call->>'completion_tokens')::int) AS total_completion_tokens,
  SUM((call->>'total_tokens')::int) AS total_tokens,
  SUM((call->>'cost_usd')::numeric) AS total_cost
FROM
  cost_tracking,
  jsonb_array_elements(openai_calls) AS call
WHERE
  created_at >= NOW() - INTERVAL '24 hours'
GROUP BY
  model_name
ORDER BY
  total_cost DESC;
```

### –†–µ–∑—É–ª—å—Ç–∞—Ç:
```
model_name          | total_calls | total_prompt_tokens | total_completion_tokens | total_tokens | total_cost
--------------------|-------------|---------------------|-------------------------|--------------|------------
gpt-4o              | 145         | 582,340             | 198,456                 | 780,796      | 2.451180
gpt-4o-mini         | 432         | 324,567             | 87,234                  | 411,801      | 0.101295
text-embedding-...  | 89          | 234,890             | 0                       | 234,890      | 0.023489
claude-haiku-4.5    | 23          | 45,678              | 12,345                  | 58,023       | 0.107451
claude-sonnet-4.5   | 12          | 67,890              | 23,456                  | 91,346       | 0.555618
```

---

## ‚ú® –ß—Ç–æ –±—ã–ª–æ –æ–±–Ω–æ–≤–ª–µ–Ω–æ (2026-01-18)

### –î–æ–±–∞–≤–ª–µ–Ω—ã —Ü–µ–Ω—ã –¥–ª—è –≤—Å–µ—Ö –º–æ–¥–µ–ª–µ–π Claude:

**–§–∞–π–ª:** `mcp_backend/src/utils/model-selector.ts`

```typescript
// Claude models (updated 2026-01-18 from official pricing)
'claude-opus-4.5': { input: 5.00, output: 25.00 },
'claude-opus-4.1': { input: 15.00, output: 75.00 },
'claude-opus-4': { input: 15.00, output: 75.00 },
'claude-opus-3': { input: 15.00, output: 75.00 },
'claude-sonnet-4.5': { input: 3.00, output: 15.00 },
'claude-sonnet-4': { input: 3.00, output: 15.00 },
'claude-sonnet-3.7': { input: 3.00, output: 15.00 },
'claude-haiku-4.5': { input: 1.00, output: 5.00 },
'claude-haiku-3.5': { input: 0.80, output: 4.00 },
'claude-haiku-3': { input: 0.25, output: 1.25 },

// Aliases –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞
'claude-opus': { input: 5.00, output: 25.00 },
'claude-sonnet': { input: 3.00, output: 15.00 },
'claude-haiku': { input: 1.00, output: 5.00 },
```

---

## üéØ –í—ã–≤–æ–¥—ã

### ‚úÖ –°–∏—Å—Ç–µ–º–∞ –Ω–∞–¥–µ–∂–Ω–∞

1. **–ö–∞–∂–¥–∞—è –º–æ–¥–µ–ª—å –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ** - –Ω–∞–∑–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏ –±–µ—Ä–µ—Ç—Å—è –∏–∑ –æ—Ç–≤–µ—Ç–∞ API
2. **–°—Ç–æ–∏–º–æ—Å—Ç—å —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —Ç–æ—á–Ω–æ** - –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ä–µ–∞–ª—å–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã –∏ —Ü–µ–Ω—ã –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –º–æ–¥–µ–ª–∏
3. **–î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –¥–µ—Ç–∞–ª—å–Ω–æ** - –º–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∫–∞–∂–¥—ã–π –≤—ã–∑–æ–≤ —Å timestamp
4. **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –≤—Å–µ –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –º–æ–¥–µ–ª–∏** - OpenAI –∏ Claude (–æ–±–Ω–æ–≤–ª–µ–Ω–æ 2026-01-18)

### üìä –î–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –¥–æ—Å—Ç—É–ø–Ω–æ:

- –ö–∞–∫–∏–µ –º–æ–¥–µ–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å –≤ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ
- –°–∫–æ–ª—å–∫–æ —Ç–æ–∫–µ–Ω–æ–≤ –ø–æ—Ç—Ä–∞—á–µ–Ω–æ –Ω–∞ –∫–∞–∂–¥—É—é –º–æ–¥–µ–ª—å (input/output –æ—Ç–¥–µ–ª—å–Ω–æ)
- –¢–æ—á–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –∫–∞–∂–¥–æ–≥–æ –≤—ã–∑–æ–≤–∞
- –í—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –∑–∞–¥–∞—á–∞–º (intent_classification, embedding, deep_analysis, etc.)

### üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–µ—à–µ–≤—ã–µ –º–æ–¥–µ–ª–∏ –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –∑–∞–¥–∞—á:**
   - GPT-4o Mini ($0.15/$0.60) - –¥–ª—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏, –ø—Ä–æ—Å—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
   - Claude Haiku 4.5 ($1/$5) - –¥–ª—è –±—ã—Å—Ç—Ä—ã—Ö –∑–∞–¥–∞—á
   - Claude Haiku 3 ($0.25/$1.25) - —Å–∞–º–∞—è –¥–µ—à–µ–≤–∞—è –æ–ø—Ü–∏—è

2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–æ—Ä–æ–≥–∏–µ –º–æ–¥–µ–ª–∏ —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ:**
   - GPT-4o ($2.50/$10) - –¥–ª—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞
   - Claude Sonnet 4.5 ($3/$15) - –¥–ª—è —é—Ä–∏–¥–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞
   - Claude Opus 4.5 ($5/$25) - –¥–ª—è —Å–ª–æ–∂–Ω–æ–≥–æ –≥–ª—É–±–æ–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞

3. **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ —Ä–∞—Å—Ö–æ–¥—ã —á–µ—Ä–µ–∑ SQL:**
   - –°–æ–∑–¥–∞–π—Ç–µ –¥–∞—à–±–æ—Ä–¥ —Å –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π
   - –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–ª–µ—Ä—Ç—ã –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –±—é–¥–∂–µ—Ç–∞
   - –ê–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ, –∫–∞–∫–∏–µ –º–æ–¥–µ–ª–∏ –¥–∞—é—Ç –ª—É—á—à–µ–µ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ —Ü–µ–Ω–∞/–∫–∞—á–µ—Å—Ç–≤–æ

---

## üìö –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

- **–û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞:** `mcp_backend/src/utils/openai-client.ts`
- **–†–∞—Å—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏:** `mcp_backend/src/utils/model-selector.ts`
- **–ó–∞–ø–∏—Å—å –≤ –ë–î:** `mcp_backend/src/services/cost-tracker.ts`
- **–¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö:** `mcp_backend/src/types/cost.ts`
- **–¶–µ–Ω—ã –º–æ–¥–µ–ª–µ–π:** `pricing_combined.json`
- **–°—Ö–µ–º–∞ –ë–î:** `mcp_backend/src/database/schema.sql`

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2026-01-18
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
